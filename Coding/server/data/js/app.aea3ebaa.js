(function(e){function t(t){for(var r,i,c=t[0],s=t[1],l=t[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"03af":function(e,t,n){},"18bf":function(e,t,n){"use strict";n("22b1")},"22b1":function(e,t,n){},"32eb":function(e,t,n){},"463b":function(e,t,n){},"4d91":function(e,t,n){},"56fe":function(e,t,n){},"5ac6":function(e,t,n){"use strict";n("03af")},"630b":function(e,t,n){},"65af":function(e,t,n){"use strict";n("32eb")},"6d26":function(e,t,n){"use strict";n("56fe")},"6e85":function(e,t,n){e.exports=n.p+"img/icons.5b128b85.svg"},7558:function(e,t,n){"use strict";n("463b")},"7af9":function(e,t,n){"use strict";n("8fb5")},"8af2":function(e,t,n){"use strict";n("e5b8")},"8fb5":function(e,t,n){},"95d4":function(e,t,n){},"992d":function(e,t,n){},b4da:function(e,t,n){"use strict";n("f38e")},cbb3:function(e,t,n){"use strict";n("630b")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"complatform"},o={class:"header-view-container"};function i(e,t,n,i,c,s){var l=Object(r["D"])("Toast"),u=Object(r["D"])("Sidebar"),d=Object(r["D"])("Header"),f=Object(r["D"])("router-view"),b=Object(r["D"])("TextDialog");return Object(r["u"])(),Object(r["g"])("div",a,[Object(r["k"])(l,{position:"bottom-center"}),Object(r["k"])(u,{class:"sidebar"}),Object(r["k"])("div",o,[Object(r["k"])(d,{class:"header"}),Object(r["k"])(f,{class:"view"}),Object(r["k"])(b,{type:e.type,showTextDialog:e.infoDialogVisible,text:e.infoText},null,8,["type","showTextDialog","text"])])])}n("b0c0");var c=Object(r["P"])("data-v-6ff4dd7c");Object(r["y"])("data-v-6ff4dd7c");var s={class:"sidebar"},l={class:"top-nav"},u={class:"icon"},d={class:"icon"},f={class:"icon"},b={class:"icon"},m={class:"bottom-nav"},h={class:"icon"},g={class:"icon"};Object(r["v"])();var O,p=c((function(e,t,a,o,i,O){var p=Object(r["D"])("Menu"),j=Object(r["D"])("router-link");return Object(r["u"])(),Object(r["g"])("div",s,["Zumo32U4 Robot"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])(p,{key:0,ref:"menu",model:e.zumoMenu,popup:!0},null,8,["model"])):"ComPlatform"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])(p,{key:1,ref:"menu",model:e.comMenu,popup:!0},null,8,["model"])):Object(r["h"])("",!0),Object(r["k"])("nav",l,[Object(r["k"])(j,{to:"/",class:"Home"},{default:c((function(){return[(Object(r["u"])(),Object(r["g"])("svg",u,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#home-white"},null,8,["xlink:href"])]))]})),_:1}),Object(r["k"])(j,{to:"/upload",class:"Upload"},{default:c((function(){return[(Object(r["u"])(),Object(r["g"])("svg",d,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#upload-white"},null,8,["xlink:href"])]))]})),_:1}),Object(r["k"])(j,{to:"/flash",class:"Flash"},{default:c((function(){return[(Object(r["u"])(),Object(r["g"])("svg",f,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#flash-white"},null,8,["xlink:href"])]))]})),_:1}),Object(r["k"])(j,{to:"/debug",class:"Debug"},{default:c((function(){return[(Object(r["u"])(),Object(r["g"])("svg",b,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#debug-white"},null,8,["xlink:href"])]))]})),_:1})]),Object(r["k"])("nav",m,[Object(r["k"])("div",{onClick:t[1]||(t[1]=function(){return e.resetClick&&e.resetClick.apply(e,arguments)})},[(Object(r["u"])(),Object(r["g"])("svg",h,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#reset-white"},null,8,["xlink:href"])]))]),Object(r["k"])(j,{to:"/settings",class:"Settings"},{default:c((function(){return[(Object(r["u"])(),Object(r["g"])("svg",g,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#settings-white"},null,8,["xlink:href"])]))]})),_:1})])])})),j=n("d4ec"),v=function e(){Object(j["a"])(this,e),this.commandId="",this.jsonPayload=""},k=n("1da1"),y=n("bee2");n("96cf"),n("d3b7");(function(e){e[e["LEVEL_INVALID"]=4]="LEVEL_INVALID",e[e["LEVEL_DEBUG"]=3]="LEVEL_DEBUG",e[e["LEVEL_INFO"]=2]="LEVEL_INFO",e[e["LEVEL_WARN"]=1]="LEVEL_WARN",e[e["LEVEL_ERROR"]=0]="LEVEL_ERROR"})(O||(O={}));var w=function(){function e(){Object(j["a"])(this,e)}return Object(y["a"])(e,null,[{key:"setLogLevel",value:function(e){this.m_logLevel=e}},{key:"getLogLevel",value:function(){return this.m_logLevel}},{key:"debug",value:function(t){e.writeLog(O.LEVEL_DEBUG,"[+]\t"+t)}},{key:"info",value:function(t){e.writeLog(O.LEVEL_INFO,"[i]\t"+t)}},{key:"warn",value:function(t){e.writeLog(O.LEVEL_WARN,"[!]\t"+t)}},{key:"error",value:function(t){e.writeLog(O.LEVEL_ERROR,"[-]\t"+t)}},{key:"writeLog",value:function(e,t){e<=this.m_logLevel&&0<t.length&&console.log(t)}}]),e}();w.m_logLevel=O.LEVEL_DEBUG;var _,S=function(){function e(){Object(j["a"])(this,e),this.m_host="wss://complatform.local/api",this.m_socketClient=new WebSocket(this.m_host),w.debug("Trying to connect to WebSocket host at "+this.m_host)}return Object(y["a"])(e,[{key:"onOpen",value:function(e){this.m_socketClient.onopen=e}},{key:"onClose",value:function(e){this.m_socketClient.onclose=e}},{key:"onError",value:function(e){this.m_socketClient.onerror=e}},{key:"disconnect",value:function(){w.debug("Trying to close WebSocket connection!"),this.m_socketClient.close()}},{key:"getState",value:function(){return this.m_socketClient.readyState}},{key:"send",value:function(e){var t=!1;return WebSocket.OPEN==this.getState()&&(this.m_socketClient.send(e),t=!0),!1===t&&w.error("Could not send WebSocket data because connection is not opened!"),t}},{key:"onMessage",value:function(e){this.m_socketClient.onmessage=e}}],[{key:"getInstance",value:function(){return this.m_instance||(this.m_instance=new e,w.debug("New WebSocketClient instance created!")),this.m_instance}}]),e}();(function(e){e[e["SUCCESS"]=200]="SUCCESS",e[e["BAD_REQUEST"]=400]="BAD_REQUEST",e[e["UNAUTHORIZED"]=401]="UNAUTHORIZED",e[e["FORBIDDEN"]=403]="FORBIDDEN",e[e["NOT_FOUND"]=404]="NOT_FOUND",e[e["METHOD_NOT_ALLOWED"]=405]="METHOD_NOT_ALLOWED",e[e["ERROR"]=500]="ERROR",e[e["NOT_IMPLEMENTED"]=501]="NOT_IMPLEMENTED"})(_||(_={}));var E=function e(){Object(j["a"])(this,e),this.statusCode=_.ERROR,this.jsonPayload=""},D=function(){function e(){Object(j["a"])(this,e),this.m_wsClient=S.getInstance()}return Object(y["a"])(e,[{key:"makeRequest",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r,a=this,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.abrupt("return",new Promise((function(e){var o=new E;!0===a.m_wsClient.send(JSON.stringify(t))?a.m_wsClient.onMessage((function(a){o=JSON.parse(a.data),_.SUCCESS===o.statusCode?(w.debug("Successfully executed ApiRequest command "+t.commandId),e(o)):_.UNAUTHORIZED===o.statusCode?(w.debug("Unauthorized access to ApiRequest command "+t.commandId),n.$toast.add({severity:"warn",summary:"Missing Permission",detail:"You do not have the required permission to execute the command "+t.commandId,life:5e3}),"null"==n.$store.getters.currentUser&&n.$store.commit("setLoginDialogVisibility",!0),e(o)):(!1===r&&n.$toast.add({severity:"error",summary:"API Service error",detail:"Could not execute command "+t.commandId+"!\nRepsonse Code: "+_[o.statusCode],life:5e3}),e(o))})):(w.debug("Fatal server error occured while sending ApiRequest command "+t.commandId),o.statusCode=_.ERROR,n.$toast.add({severity:"error",summary:"Fatal Server Error",detail:"A fatal server communication error occured!",life:5e3}),e(o))})));case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sendBinary",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=new E;!0===r.m_wsClient.send(t)?r.m_wsClient.onMessage((function(r){a=JSON.parse(r.data),_.SUCCESS===a.statusCode?w.debug("Successfully sent binary chunk with "+t.length+" bytes"):_.UNAUTHORIZED===a.statusCode?(w.warn("Unauthorized to send binary chunk!"),n.$toast.add({severity:"warn",summary:"Missing Permission",detail:"You do not have the required permission to send binary data!\nRepsonse Code: "+_[a.statusCode],life:5e3})):n.$toast.add({severity:"error",summary:"API Service error",detail:"Could not send binary data!\nRepsonse Code: "+_[a.statusCode],life:5e3}),e(a)})):(w.error("Fatal server error occured while sending binary data"),a.statusCode=_.ERROR,n.$toast.add({severity:"error",summary:"Fatal Server Error",detail:"A fatal server communication error occured!",life:5e3}),e(a))})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}],[{key:"getInstance",value:function(){return this.m_reqResHandler}}]),e}();D.m_reqResHandler=new D;var I=Object(r["l"])({name:"Sidebar",data:function(){var e=this;return{zumoMenu:[{label:"Reboot Zumo32U4 Robot",icon:"pi pi-power-off",command:function(){var t=new v;t.commandId="rebootzumo",D.getInstance().makeRequest(t,e)}}],comMenu:[{label:"Reboot ComPlatform",icon:"pi pi-power-off",command:function(){var t=new v;t.commandId="rebootcom",D.getInstance().makeRequest(t,e)}}]}},methods:{resetClick:function(e){this.$refs.menu.toggle(e)}}});n("7af9");I.render=p,I.__scopeId="data-v-6ff4dd7c";var C=I,T=Object(r["P"])("data-v-2d3321b5");Object(r["y"])("data-v-2d3321b5");var A={class:"header"},x={class:"header-ui"},U={class:"device-selection"},B={key:0,class:"device-icon"},R={key:1,class:"device-icon"},P={class:"user-selection"},L={key:0,class:"username-label"},V={key:0,class:"username-icon"};Object(r["v"])();var Z=T((function(e,t,a,o,i,c){var s=Object(r["D"])("Menu"),l=Object(r["D"])("Dropdown"),u=Object(r["D"])("Button"),d=Object(r["D"])("LoginDialog");return Object(r["u"])(),Object(r["g"])(r["a"],null,[Object(r["k"])("div",A,[Object(r["k"])("div",x,[Object(r["k"])("div",U,[Object(r["k"])(s,{ref:"menu",model:e.menuEntries,popup:!0},null,8,["model"]),Object(r["k"])(l,{modelValue:e.selectedDevice,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedDevice=t}),options:e.devices,optionLabel:"name",placeholder:"Select a Device"},null,8,["modelValue","options"]),"ComPlatform"===e.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("svg",B,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#complatform-white"},null,8,["xlink:href"])])):"Zumo32U4 Robot"===e.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("svg",R,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#zumorobot-white"},null,8,["xlink:href"])])):Object(r["h"])("",!0)]),Object(r["k"])("div",P,["null"!=e.currentUser?(Object(r["u"])(),Object(r["g"])("p",L,Object(r["H"])(e.currentUser),1)):Object(r["h"])("",!0),Object(r["k"])("div",{onClick:t[2]||(t[2]=function(){return e.userIconClick&&e.userIconClick.apply(e,arguments)})},["null"!=e.currentUser?(Object(r["u"])(),Object(r["g"])("svg",V,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#user-white"},null,8,["xlink:href"])])):Object(r["h"])("",!0)]),"null"==e.currentUser?(Object(r["u"])(),Object(r["g"])(u,{key:1,label:"Sign in",icon:"pi pi-user",iconPos:"right",class:"p-button-rounded",onClick:e.signIn},null,8,["onClick"])):Object(r["h"])("",!0)])])]),Object(r["k"])(d,{show:e.showLoginDialog},null,8,["show"])],64)})),N=Object(r["P"])("data-v-3b58430c");Object(r["y"])("data-v-3b58430c");var $={class:"dialog-background"},H={class:"login-dialog"},F=Object(r["k"])("h1",null,"Please enter your user credentials!",-1),Y={class:"form"},M={class:"p-float-label p-input-icon-left"},G=Object(r["k"])("i",{class:"pi pi-user"},null,-1),W=Object(r["k"])("label",{for:"username"},"Username",-1),q={class:"p-float-label p-input-icon-left"},z=Object(r["k"])("i",{class:"pi pi-key"},null,-1),J=Object(r["k"])("label",{for:"password"},"Password",-1),K={key:0,class:"error-container"},Q={class:"error-icon"},X=Object(r["k"])("p",{class:"error-label"}," Could not sign in with provided user credentials! ",-1),ee={class:"buttons"};Object(r["v"])();var te=N((function(e,t,a,o,i,c){var s=Object(r["D"])("InputText"),l=Object(r["D"])("ProgressBar"),u=Object(r["D"])("Button");return Object(r["u"])(),Object(r["g"])(r["b"],{to:"body"},[Object(r["N"])(Object(r["k"])("div",$,[Object(r["k"])("div",H,[F,Object(r["k"])("div",Y,[Object(r["k"])("span",M,[G,Object(r["k"])(s,{id:"username",type:"text",modelValue:e.usercredentials.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.usercredentials.username=t})},null,8,["modelValue"]),W]),Object(r["k"])("span",q,[z,Object(r["k"])(s,{id:"password",type:"password",modelValue:e.usercredentials.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.usercredentials.password=t})},null,8,["modelValue"]),J])]),!1===e.loginSuccess?(Object(r["u"])(),Object(r["g"])("div",K,[(Object(r["u"])(),Object(r["g"])("svg",Q,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#error-red"},null,8,["xlink:href"])])),X])):Object(r["h"])("",!0),!0===e.spinnerVisible?(Object(r["u"])(),Object(r["g"])(l,{key:1,class:"progress-bar",mode:"indeterminate"})):Object(r["h"])("",!0),Object(r["k"])("div",ee,[Object(r["k"])(u,{label:"Cancel",icon:"pi pi-times",iconPos:"right",class:"p-button-rounded p-button-danger",onClick:t[3]||(t[3]=function(t){return e.cancelClick()})}),Object(r["k"])(u,{label:"Login",icon:"pi pi-sign-in",iconPos:"right",class:"p-button-rounded",onClick:t[4]||(t[4]=function(t){return e.signInClick()})})])])],512),[[r["K"],e.showLoginDialog]])])})),ne=function e(){Object(j["a"])(this,e),this.username="",this.password=""},re=Object(r["l"])({name:"LoginDialog",computed:{showLoginDialog:{get:function(){return this.$store.getters.loginDialogVisible},set:function(e){this.$store.commit("setLoginDialogVisibility",e)}}},data:function(){return{usercredentials:new ne,spinnerVisible:!1,loginSuccess:!0}},methods:{reset:function(){this.showLoginDialog=!1,this.spinnerVisible=!1,this.loginSuccess=!0},cancelClick:function(){this.reset()},signInClick:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.spinnerVisible=!0,n=new v,n.commandId="authenticate",n.jsonPayload=JSON.stringify(e.usercredentials),D.getInstance().makeRequest(n,e).then((function(t){t.statusCode==_.SUCCESS?(e.$store.commit("setUser",e.usercredentials.username),e.reset(),e.$toast.add({severity:"success",summary:"Login Success",detail:"Successfully signed in!",life:5e3}),w.debug("Successfully logged in!")):(e.$store.commit("setUser","null"),e.loginSuccess=!1,e.spinnerVisible=!1,w.debug("Could not log in!"))}));case 5:case"end":return t.stop()}}),t)})))()}}});n("d41c");re.render=te,re.__scopeId="data-v-3b58430c";var ae=re,oe=Object(r["l"])({name:"Header",data:function(){var e=this;return{devices:[{name:"Zumo32U4 Robot"},{name:"ComPlatform"}],menuEntries:[{label:"Sign out",icon:"pi pi-sign-out",command:function(){var t=new v;t.commandId="deauthenticate",D.getInstance().makeRequest(t,e).then((function(t){t.statusCode==_.SUCCESS&&(e.$store.commit("setUser","null"),w.info("Successfully signed out!"))}))}}]}},components:{LoginDialog:ae},computed:{selectedDevice:{get:function(){return this.$store.getters.selectedDevice},set:function(e){this.$store.commit("setDevice",e)}},currentUser:{get:function(){return this.$store.getters.currentUser},set:function(e){this.$store.commit("setUser",e)}}},methods:{signIn:function(){this.$store.commit("setLoginDialogVisibility",!0)},userIconClick:function(e){this.$refs.menu.toggle(e)}}});n("18bf");oe.render=Z,oe.__scopeId="data-v-2d3321b5";var ie=oe,ce=Object(r["P"])("data-v-cdfcc652");Object(r["y"])("data-v-cdfcc652");var se={class:"dialog-background"},le={class:"dialog-container"},ue={key:0},de={class:"text-block"},fe={key:1},be={class:"text-block"},me={class:"button-container"},he=Object(r["j"])("Confirm"),ge={key:2},Oe={class:"text-block"},pe={class:"button-container"};Object(r["v"])();var je=ce((function(e,t,a,o,i,c){var s=Object(r["D"])("ProgressSpinner"),l=Object(r["D"])("Button");return Object(r["u"])(),Object(r["g"])(r["b"],{to:"body"},[Object(r["N"])(Object(r["k"])("div",se,[Object(r["k"])("div",le,["info"===e.type?(Object(r["u"])(),Object(r["g"])("div",ue,[(Object(r["u"])(),Object(r["g"])("svg",null,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#info-black"},null,8,["xlink:href"])])),Object(r["k"])("p",de,Object(r["H"])(e.text),1),Object(r["k"])(s)])):"confirm"===e.type?(Object(r["u"])(),Object(r["g"])("div",fe,[(Object(r["u"])(),Object(r["g"])("svg",null,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#question-black"},null,8,["xlink:href"])])),Object(r["k"])("p",be,Object(r["H"])(e.text),1),Object(r["k"])("div",me,[Object(r["k"])(l,{class:"p-button-rounded p-button-success",onClick:t[1]||(t[1]=function(t){return e.$emit("accepted")})},{default:ce((function(){return[he]})),_:1})])])):"no-yes"===e.type?(Object(r["u"])(),Object(r["g"])("div",ge,[(Object(r["u"])(),Object(r["g"])("svg",null,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#question-black"},null,8,["xlink:href"])])),Object(r["k"])("p",Oe,Object(r["H"])(e.text),1),Object(r["k"])("div",pe,[Object(r["k"])(l,{label:"Abort",class:"p-button-rounded p-button-danger",onClick:t[2]||(t[2]=function(t){return e.$emit("declined")})}),Object(r["k"])(l,{label:"Accept",class:"p-button-rounded p-button-success",onClick:t[3]||(t[3]=function(t){return e.$emit("accepted")})})])])):Object(r["h"])("",!0)])],512),[[r["K"],e.showTextDialog]])])})),ve=Object(r["l"])({name:"LoginDialog",props:["showTextDialog","type","text"]});n("cbb3");ve.render=je,ve.__scopeId="data-v-cdfcc652";var ke=ve,ye=Object(r["l"])({name:"App",components:{Sidebar:C,Header:ie,TextDialog:ke},data:function(){return{type:"info",infoDialogVisible:!1,infoText:"Connecting to Server. Please wait ..."}},beforeCreate:function(){S.getInstance(),this.$store.commit("setDevice",{name:"Zumo32U4 Robot"}),this.$store.commit("setUser","null"),this.$store.commit("setLoginDialogVisibility",!1)},methods:{registerWSEvents:function(){var e=this;S.getInstance().onOpen((function(){e.infoDialogVisible=!1,e.$toast.add({severity:"success",summary:"Connected",detail:"Successfully connected to server!",life:5e3}),w.debug("New WebSocket connection opened!")})),S.getInstance().onClose((function(){e.infoDialogVisible=!0,e.$store.commit("setUser","null"),w.debug("WebSocket connection closed!")})),S.getInstance().onError((function(){e.infoDialogVisible=!0,e.$store.commit("setUser","null"),e.$toast.add({severity:"error",summary:"Server Connection Error",detail:"A fatal connection error occured! Reconnecting in two seconds!",life:5e3}),w.debug("Fatal WebSocket error occured! Reconnecting in two seconds!"),setTimeout((function(){e.$router.go(0)}),2e3)}))}},mounted:function(){this.infoDialogVisible=!0,this.registerWSEvents()}});n("65af");ye.render=i;var we=ye,_e=n("6c02"),Se=Object(r["P"])("data-v-b65b89c6");Object(r["y"])("data-v-b65b89c6");var Ee={class:"home"},De=Object(r["k"])("div",{class:"text-container"},[Object(r["k"])("h1",{class:"welcome-text"}," Speed up your Embedded System Development with the ComPlatform! "),Object(r["k"])("h2",{class:"sub-welcome-text"}," Upload your Firmware faster and easier than ever before! ")],-1),Ie={class:"card-container"},Ce=Object(r["j"])("Configuration made easy!"),Te={class:"card-icon"},Ae=Object(r["j"])(" The ComPlatform system allows you to enable or disable the WiFi station mode and provides an easy configuration interface for you to configure the network credentials which are used to connect to an external WiFi access point! "),xe=Object(r["j"])("Intuitive Power Management!"),Ue={class:"card-icon"},Be=Object(r["j"])(" The firmware you wrote and flashed halts your system? No worries! The web interface of the ComPlatform makes it easy to reboot both the ComPlatform system as well as the attached Zumo32U4 robot with ease! "),Re=Object(r["j"])(" Debugging your Code? Nothing easier than that! "),Pe={class:"card-icon"},Le=Object(r["j"])(" Imagine a world without buggy software. With the help of the ComPlatform system and its intuitive debugging console, you can get to that dream one step closer now! The web interface allows you to analyze the data which has been received by the attached robot through the USB serial interface! "),Ve=Object(r["j"])("Upload & Flash your Firmware? Done."),Ze={class:"card-icon"},Ne=Object(r["j"])(" Cable spaghetti, annoying USB cables and the need to catch the robot and attach it to your computer each time you want to update your firmware? Are you familiar with this struggle? With the help of the ComPlatform you no longer have to loose any nerves on this issue! Simply upload your new firmware onto the ComPlatform and flash it! The intuitive OTA service allows you to update the firmware of the attached Zumo32U4 robot as well as the attached ComPlatform system itself! "),$e=Object(r["j"])("Powerful User Management & Easy to extend"),He={class:"card-icon"},Fe=Object(r["j"])(" The ComPlatform offers a powerful user management system where each user can have its own user account, protected by a securely stored password. Each user has a specific set of rights, which decides which operations are allowed to be executed. Adding new API services to the ComPlatform is super easy! Just write your service and integrate it into the ComPlatform! Read the docs and get started now! "),Ye=Object(r["j"])("A Hacker's Nightmare!"),Me={class:"card-icon"},Ge=Object(r["j"])(" The ComPlatform project focuses on information security! Specified API services require user authentication and specific user rights. The entire data traffic is fully encrypted, all user passwords are securely stored and all uploaded firmware images have to be cryptographically signed with a private key, otherwise they won't be flashed! ");Object(r["v"])();var We=Se((function(e,t,a,o,i,c){var s=Object(r["D"])("Card");return Object(r["u"])(),Object(r["g"])("div",Ee,[De,Object(r["k"])("div",Ie,[Object(r["k"])(s,{class:"info-card"},{title:Se((function(){return[Ce]})),header:Se((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Te,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#settings-black"},null,8,["xlink:href"])]))]})),content:Se((function(){return[Ae]})),_:1}),Object(r["k"])(s,{class:"info-card"},{title:Se((function(){return[xe]})),header:Se((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Ue,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#reset-black"},null,8,["xlink:href"])]))]})),content:Se((function(){return[Be]})),_:1}),Object(r["k"])(s,{class:"info-card"},{title:Se((function(){return[Re]})),header:Se((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Pe,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#debug-black"},null,8,["xlink:href"])]))]})),content:Se((function(){return[Le]})),_:1}),Object(r["k"])(s,{class:"info-card"},{title:Se((function(){return[Ve]})),header:Se((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Ze,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#flash-black"},null,8,["xlink:href"])]))]})),content:Se((function(){return[Ne]})),_:1}),Object(r["k"])(s,{class:"info-card"},{title:Se((function(){return[$e]})),header:Se((function(){return[(Object(r["u"])(),Object(r["g"])("svg",He,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#user-black"},null,8,["xlink:href"])]))]})),content:Se((function(){return[Fe]})),_:1}),Object(r["k"])(s,{class:"info-card"},{title:Se((function(){return[Ye]})),header:Se((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Me,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#security-black"},null,8,["xlink:href"])]))]})),content:Se((function(){return[Ge]})),_:1})])])})),qe=n("262e"),ze=n("2caf"),Je=n("9ab4"),Ke=n("ce1f"),Qe=function(e){Object(qe["a"])(n,e);var t=Object(ze["a"])(n);function n(){return Object(j["a"])(this,n),t.apply(this,arguments)}return n}(Ke["b"]);Qe=Object(Je["a"])([Object(Ke["a"])({components:{}})],Qe);var Xe=Qe;n("da36");Xe.render=We,Xe.__scopeId="data-v-b65b89c6";var et=Xe,tt=Object(r["P"])("data-v-71bbe0ce");Object(r["y"])("data-v-71bbe0ce");var nt={class:"settings"},rt={key:0,class:"settings-view"},at={key:1,class:"settings-view"},ot={class:"info-pane"},it={class:"info-image"},ct=Object(r["k"])("h1",{class:"info-text"},"No menu entry selected",-1);Object(r["v"])();var st=tt((function(e,t,a,o,i,c){var s=Object(r["D"])("SettingsMenu"),l=Object(r["D"])("ConnectivityCOM");return Object(r["u"])(),Object(r["g"])("div",nt,[Object(r["k"])(s,{class:"settings-menu",onEntryClick:e.entryClick},null,8,["onEntryClick"]),"connectivity-com"===e.selectedMenuEntry&&!1===e.hideView?(Object(r["u"])(),Object(r["g"])("div",rt,[Object(r["k"])(l)])):(Object(r["u"])(),Object(r["g"])("div",at,[Object(r["k"])("div",ot,[(Object(r["u"])(),Object(r["g"])("svg",it,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#info-black"},null,8,["xlink:href"])])),ct])]))])})),lt=Object(r["P"])("data-v-211ad0da");Object(r["y"])("data-v-211ad0da");var ut={class:"settings-menu"},dt={key:0,class:"com-settings"},ft={class:"entry-icon"},bt=Object(r["k"])("h1",{class:"entry-text"},"Connectivity",-1),mt={key:1,class:"zumo-settings"},ht={class:"info-pane"},gt={class:"info-image"},Ot=Object(r["k"])("h1",{class:"info-text"},"No Settings available",-1);Object(r["v"])();var pt=lt((function(e,t,a,o,i,c){return Object(r["u"])(),Object(r["g"])("div",ut,["ComPlatform"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("div",dt,[Object(r["k"])("div",{class:"menu-entry",onClick:t[1]||(t[1]=function(t){return e.$emit("entry-click",t,"connectivity-com")})},[(Object(r["u"])(),Object(r["g"])("svg",ft,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#wifi-black"},null,8,["xlink:href"])])),bt])])):"Zumo32U4 Robot"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("div",mt,[Object(r["k"])("div",ht,[(Object(r["u"])(),Object(r["g"])("svg",gt,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#info-black"},null,8,["xlink:href"])])),Ot])])):Object(r["h"])("",!0)])})),jt=Object(r["l"])({name:"SettingsMenu"});n("eb03");jt.render=pt,jt.__scopeId="data-v-211ad0da";var vt=jt,kt=Object(r["P"])("data-v-2d2e975c");Object(r["y"])("data-v-2d2e975c");var yt={class:"connectivity-settings-container"},wt=Object(r["j"])("STA-Mode Network Credentials"),_t={class:"card-icon"},St=Object(r["k"])("label",{for:"sta-checkbox"},"Use STA-Mode",-1),Et={class:"card-content-container"},Dt={key:0,class:"p-float-label p-input-icon-left"},It=Object(r["k"])("i",{class:"pi pi-wifi"},null,-1),Ct=Object(r["k"])("label",{for:"ssid"},"SSID",-1),Tt={key:1,class:"p-float-label p-input-icon-left"},At=Object(r["k"])("i",{class:"pi pi-key"},null,-1),xt=Object(r["k"])("label",{for:"passphrase"},"Passphrase",-1);Object(r["v"])();var Ut=kt((function(e,t,a,o,i,c){var s=Object(r["D"])("TextDialog"),l=Object(r["D"])("Checkbox"),u=Object(r["D"])("InputText"),d=Object(r["D"])("Button"),f=Object(r["D"])("Card");return Object(r["u"])(),Object(r["g"])(r["a"],null,[Object(r["k"])(s,{type:e.type,showTextDialog:e.confirmDialogVisible,text:e.infoText,onDeclined:e.declineClick,onAccepted:e.acceptClick},null,8,["type","showTextDialog","text","onDeclined","onAccepted"]),Object(r["k"])("div",yt,[Object(r["k"])(f,{class:"settings-card"},{title:kt((function(){return[wt]})),header:kt((function(){return[(Object(r["u"])(),Object(r["g"])("svg",_t,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#block-black"},null,8,["xlink:href"])]))]})),content:kt((function(){return[Object(r["k"])("div",null,[Object(r["k"])(l,{id:"sta-checkbox",modelValue:e.useSTAMode,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.useSTAMode=t}),binary:!0},null,8,["modelValue"]),St]),Object(r["k"])("div",Et,[!0===e.useSTAMode?(Object(r["u"])(),Object(r["g"])("span",Dt,[It,Object(r["k"])(u,{id:"ssid",type:"text",modelValue:e.credentials.ssid,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.credentials.ssid=t})},null,8,["modelValue"]),Ct])):Object(r["h"])("",!0),!0===e.useSTAMode?(Object(r["u"])(),Object(r["g"])("span",Tt,[At,Object(r["k"])(u,{id:"passphrase",type:"password",modelValue:e.credentials.passphrase,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.credentials.passphrase=t})},null,8,["modelValue"]),xt])):Object(r["h"])("",!0),Object(r["k"])(d,{label:"Save",icon:"pi pi-save",iconPos:"right",class:"p-button-rounded",onClick:t[4]||(t[4]=function(t){return e.save()})})])]})),_:1})])],64)})),Bt=function e(){Object(j["a"])(this,e),this.ssid="",this.passphrase=""},Rt=Object(r["l"])({name:"ConnectivityCOM",data:function(){return{credentials:new Bt,useSTAMode:!0,type:"no-yes",confirmDialogVisible:!1,infoText:"In order for the changes to take effect, the ComPlatform needs to be rebooted. Do you want to reboot the ComPlatform now?"}},components:{TextDialog:ke},methods:{save:function(){var e=this,t=new v;t.commandId="setstacredentials",!0===this.useSTAMode&&(t.jsonPayload=JSON.stringify(this.credentials)),D.getInstance().makeRequest(t,this).then((function(t){t.statusCode==_.SUCCESS&&(e.confirmDialogVisible=!0)}))},declineClick:function(){this.confirmDialogVisible=!1},acceptClick:function(){var e=this;this.confirmDialogVisible=!1;var t=new v;t.commandId="rebootcom",D.getInstance().makeRequest(t,this).then((function(t){t.statusCode==_.SUCCESS&&setTimeout((function(){e.$router.go(0)}),2e3)}))}}});n("8af2");Rt.render=Ut,Rt.__scopeId="data-v-2d2e975c";var Pt=Rt,Lt=Object(r["l"])({name:"Settings",data:function(){return{selectedMenuEntry:"null",hideView:!1}},components:{SettingsMenu:vt,ConnectivityCOM:Pt},methods:{entryClick:function(e,t){this.hideView=!1,this.selectedMenuEntry=t}},watch:{"$store.state.seletedDevice.name":function(e,t){this.hideView=e!=t}}});n("b4da");Lt.render=st,Lt.__scopeId="data-v-71bbe0ce";var Vt=Lt,Zt={class:"debug"},Nt=Object(r["k"])("h1",null,"This is the DEBUG page",-1);function $t(e,t,n,a,o,i){return Object(r["u"])(),Object(r["g"])("div",Zt,[Nt])}var Ht=function(e){Object(qe["a"])(n,e);var t=Object(ze["a"])(n);function n(){return Object(j["a"])(this,n),t.apply(this,arguments)}return n}(Ke["b"]);Ht=Object(Je["a"])([Object(Ke["a"])({})],Ht);var Ft=Ht;Ft.render=$t;var Yt=Ft,Mt=Object(r["P"])("data-v-b8843bd4");Object(r["y"])("data-v-b8843bd4");var Gt={class:"flash"};Object(r["v"])();var Wt=Mt((function(e,t,n,a,o,i){var c=Object(r["D"])("TextDialog"),s=Object(r["D"])("FirmwareCard"),l=Object(r["D"])("Button");return Object(r["u"])(),Object(r["g"])("div",Gt,[Object(r["k"])(c,{type:e.type,showTextDialog:e.confirmDialogVisible,text:e.infoText,onDeclined:t[1]||(t[1]=function(t){return e.confirmDialogVisible=!1}),onAccepted:e.flash},null,8,["type","showTextDialog","text","onAccepted"]),Object(r["k"])(s,{class:"firmware-card"}),Object(r["k"])(l,{label:"Flash firmware now!",icon:"pi pi-chevron-circle-right",iconPos:"right",class:"p-button-lg p-button-rounded",onClick:t[2]||(t[2]=function(t){return e.confirmDialogVisible=!0}),disabled:!e.flashEnabled},null,8,["disabled"])])})),qt=Object(r["P"])("data-v-60fb4ac0");Object(r["y"])("data-v-60fb4ac0");var zt={class:"firmware-card"},Jt={class:"card-container"},Kt=Object(r["j"])("Firmware available"),Qt={key:0,class:"card-icon"},Xt={key:1,class:"card-icon"},en={class:"card-content"},tn=Object(r["k"])("b",null,"Target:",-1),nn=Object(r["k"])("b",null,"SHA256:",-1),rn=Object(r["k"])("b",null,"Valid:",-1),an=Object(r["k"])("b",null,"Bytes:",-1),on={key:0,class:"error-container"},cn={class:"error-icon"},sn=Object(r["k"])("p",{class:"error-label"}," Invalid firmware! You cannot flash this image! ",-1);Object(r["v"])();var ln=qt((function(e,t,a,o,i,c){var s=Object(r["D"])("Card");return Object(r["u"])(),Object(r["g"])("div",zt,[Object(r["k"])("div",Jt,[Object(r["k"])(s,{class:"firmware-card"},Object(r["i"])({header:qt((function(){return[!0===e.firmwareAvailable?(Object(r["u"])(),Object(r["g"])("svg",Qt,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#success-black"},null,8,["xlink:href"])])):(Object(r["u"])(),Object(r["g"])("svg",Xt,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#error-black"},null,8,["xlink:href"])]))]})),_:2},[!0===e.firmwareAvailable?{name:"title",fn:qt((function(){return[Kt]}))}:{name:"title",fn:qt((function(){return[Object(r["j"])("No Firmware available!")]}))},!0===e.firmwareAvailable?{name:"content",fn:qt((function(){return[Object(r["k"])("div",en,[Object(r["k"])("h2",null,[tn,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.targetSystem),1)]),Object(r["k"])("h2",null,[nn,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.payloadHash),1)]),Object(r["k"])("h2",null,[rn,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.isValid),1)]),Object(r["k"])("h2",null,[an,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.sizeBytes),1)])]),!1===e.fwInfo.isValid?(Object(r["u"])(),Object(r["g"])("div",on,[(Object(r["u"])(),Object(r["g"])("svg",cn,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#error-red"},null,8,["xlink:href"])])),sn])):Object(r["h"])("",!0)]}))}:void 0]),1024)])])})),un=function e(){Object(j["a"])(this,e),this.targetSystem="",this.sizeBytes=0,this.payloadHash="",this.isValid=!1},dn=Object(r["l"])({name:"FirmwareCard",props:["update"],computed:{selectedDevice:function(){return this.$store.getters.selectedDevice.name}},data:function(){return{firmwareAvailable:!1,fwInfo:new un}},mounted:function(){this.updateFirmwareCard()},watch:{update:function(e,t){e!=t&&this.updateFirmwareCard()},selectedDevice:function(e,t){e!=t&&this.updateFirmwareCard()}},methods:{updateFirmwareCard:function(){var e=this,t="";"Zumo32U4 Robot"===this.$store.getters.selectedDevice.name?t="ZUMO":"ComPlatform"===this.$store.getters.selectedDevice.name&&(t="COM");var n=new v;n.commandId="getfirmwareinfo",n.jsonPayload=JSON.stringify({target:t}),D.getInstance().makeRequest(n,this,!0).then((function(t){w.debug("Got FirmwareInfo response"),t.statusCode==_.SUCCESS?(e.firmwareAvailable=!0,e.fwInfo=JSON.parse(t.jsonPayload)):e.firmwareAvailable=!1}))}}});n("6d26");dn.render=ln,dn.__scopeId="data-v-60fb4ac0";var fn=dn,bn=Object(r["l"])({name:"Flash",data:function(){return{type:"no-yes",flashEnabled:!0,confirmDialogVisible:!1,infoText:"Are you sure you want to flash the firmware now? This process can brick your device!"}},components:{FirmwareCard:fn,TextDialog:ke},mounted:function(){var e=this.$route.query.autoFlash;e&&"true"===e&&(w.info("Auto-flashing enabled. Flashing firmware image now!"),this.flash())},methods:{flash:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new v,n.commandId="getfirmwareinfo","ComPlatform"===e.$store.getters.selectedDevice.name?n.jsonPayload=JSON.stringify({target:"COM"}):"Zumo32U4 Robot"===e.$store.getters.selectedDevice.name&&(n.jsonPayload=JSON.stringify({target:"ZUMO"})),t.next=5,D.getInstance().makeRequest(n,e);case 5:if(r=t.sent,n.jsonPayload="",a=JSON.parse(r.jsonPayload),1!=a.isValid){t.next=16;break}return"ComPlatform"===e.$store.getters.selectedDevice.name?n.commandId="flashcom":"Zumo32U4 Robot"===e.$store.getters.selectedDevice.name&&(n.commandId="flashzumo"),t.next=12,D.getInstance().makeRequest(n,e);case 12:r=t.sent,_.SUCCESS===r.statusCode?(e.$toast.add({severity:"success",summary:"Flash Success",detail:"Successfully flashed the firmware onto the target platform!",life:5e3}),"uploadcom"===n.commandId&&(e.$toast.add({severity:"info",summary:"Rebooting ComPlatform",detail:"In order for the changes to take effect, the ComPlatform will be rebooted in 2 seconds!",life:5e3}),setTimeout((function(){e.$router.go(0)}),5e3),setTimeout((function(){n.commandId="rebootcom",D.getInstance().makeRequest(n,e)}),2e3))):e.$toast.add({severity:"error",summary:"Flash Error",detail:"Could not flash the firmware onto the target platform!",life:5e3}),t.next=17;break;case 16:e.$toast.add({severity:"error",summary:"Flash Error",detail:"Uploaded firmware is invalid and cannot be flashed!",life:5e3});case 17:case"end":return t.stop()}}),t)})))()}}});n("5ac6");bn.render=Wt,bn.__scopeId="data-v-b8843bd4";var mn=bn,hn=Object(r["P"])("data-v-008a7dc4");Object(r["y"])("data-v-008a7dc4");var gn={class:"upload"},On=Object(r["k"])("p",null,"Drag and drop .cpsfw file here to upload it!",-1),pn=Object(r["k"])("p",null," Drag and drop .bin and .pem files here to sign the firmware and upload the generated firmware! ",-1);Object(r["v"])();var jn=hn((function(e,t,n,a,o,i){var c=Object(r["D"])("TextDialog"),s=Object(r["D"])("FirmwareCard"),l=Object(r["D"])("Dropdown"),u=Object(r["D"])("FileUpload"),d=Object(r["D"])("ProgressBar");return Object(r["u"])(),Object(r["g"])("div",gn,[Object(r["k"])(c,{type:e.type,showTextDialog:e.infoDialogVisible,text:e.infoText,onDeclined:t[1]||(t[1]=function(t){return e.infoDialogVisible=!1}),onAccepted:e.fnPtr},null,8,["type","showTextDialog","text","onAccepted"]),Object(r["k"])(s,{update:e.update},null,8,["update"]),Object(r["k"])(l,{class:"dropdown",modelValue:e.uploadOption,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.uploadOption=t}),options:e.options,optionLabel:"name",placeholder:"Select an upload option"},null,8,["modelValue","options"]),"cpsfw"===e.uploadOption.key?(Object(r["u"])(),Object(r["g"])(u,{key:0,name:"demo[]",accept:".cpsfw",customUpload:!0,fileLimit:1,onUploader:e.uploadFirmware},{empty:hn((function(){return[On]})),_:1},8,["onUploader"])):"bin"===e.uploadOption.key?(Object(r["u"])(),Object(r["g"])(u,{key:1,name:"demo[]",accept:".bin,.pem",customUpload:!0,fileLimit:2,onUploader:e.uploadFirmware},{empty:hn((function(){return[pn]})),_:1},8,["onUploader"])):Object(r["h"])("",!0),!0===e.uploadActive?(Object(r["u"])(),Object(r["g"])(d,{key:2,class:"progressbar",value:e.uploadProgressPercent},null,8,["value"])):Object(r["h"])("",!0)])})),vn=(n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4de4"),n("8a79"),n("2909")),kn=function(){function e(){Object(j["a"])(this,e),this.m_idBuffer=new Uint8Array(e.ID_SIZE_BYTE),this.m_targetBuffer=new Uint8Array(e.TARGET_SIZE_BYTE),this.m_versionBuffer=new Uint8Array(e.VERSION_SIZE_BYTE),this.m_hashAlgBuffer=new Uint8Array(e.HASH_ALG_SIZE_BYTE),this.m_signAlgBuffer=new Uint8Array(e.SIGN_ALG_SIZE_BYTE),this.m_signatureBuffer=new Uint8Array(e.SIGNATURE_SIZE_BYTE)}return Object(y["a"])(e,[{key:"getTarget",value:function(){return e.BinaryToString(this.m_targetBuffer)}},{key:"setTarget",value:function(t){var n=!1;return e.TARGET_SIZE_BYTE>=t.length&&(this.m_targetBuffer=e.stringToBinary(t),n=!0),n}},{key:"setSignature",value:function(t){var n=!1;return e.SIGNATURE_SIZE_BYTE===t.length&&(this.m_signatureBuffer=t,n=!0),n}},{key:"getID",value:function(){return e.BinaryToString(this.m_idBuffer)}},{key:"setID",value:function(t){var n=!1;return e.ID_SIZE_BYTE>=t.length&&(this.m_idBuffer=e.stringToBinary(t),n=!0),n}},{key:"getVersion",value:function(){return this.m_versionBuffer[0]}},{key:"setVersion",value:function(e){this.m_versionBuffer[0]=e}},{key:"getHashAlg",value:function(){return e.BinaryToString(this.m_hashAlgBuffer)}},{key:"setHashAlg",value:function(t){var n=!1;return e.HASH_ALG_SIZE_BYTE>=t.length&&(this.m_hashAlgBuffer=e.stringToBinary(t),n=!0),n}},{key:"getSignAlg",value:function(){return e.BinaryToString(this.m_signAlgBuffer)}},{key:"setSignAlg",value:function(t){var n=!1;return e.SIGN_ALG_SIZE_BYTE>=t.length&&(this.m_signAlgBuffer=e.stringToBinary(t),n=!0),n}},{key:"serialize",value:function(){var t=new Uint8Array(e.HEADER_SIZE_BYTE),n=0;this.setID("CPSFW"),this.setVersion(1),this.setHashAlg("SHA256"),this.setSignAlg("RSA2048PKCS#1v15");for(var r=0;r<e.ID_SIZE_BYTE;r++)t[r]=this.m_idBuffer[r];n+=e.ID_SIZE_BYTE;for(var a=0;a<e.TARGET_SIZE_BYTE;a++)t[n+a]=this.m_targetBuffer[a];n+=e.TARGET_SIZE_BYTE,t[n]=this.m_versionBuffer[0],n+=1;for(var o=0;o<e.HASH_ALG_SIZE_BYTE;o++)t[n+o]=this.m_hashAlgBuffer[o];n+=e.HASH_ALG_SIZE_BYTE;for(var i=0;i<e.SIGN_ALG_SIZE_BYTE;i++)t[n+i]=this.m_signAlgBuffer[i];n+=e.SIGN_ALG_SIZE_BYTE;for(var c=0;c<e.SIGNATURE_SIZE_BYTE;c++)t[n+c]=this.m_signatureBuffer[c];return t}},{key:"deserialize",value:function(t){var n=!1;if(e.HEADER_SIZE_BYTE===t.length){for(var r=0,a=0;a<e.ID_SIZE_BYTE;a++)this.m_idBuffer[a]=t[a];r+=e.ID_SIZE_BYTE;for(var o=0;o<e.TARGET_SIZE_BYTE;o++)this.m_targetBuffer[o]=t[r+o];r+=e.TARGET_SIZE_BYTE,this.m_versionBuffer[0]=t[r],r+=1;for(var i=0;i<e.HASH_ALG_SIZE_BYTE;i++)this.m_hashAlgBuffer[i]=t[r+i];r+=e.HASH_ALG_SIZE_BYTE;for(var c=0;c<e.SIGN_ALG_SIZE_BYTE;c++)this.m_signAlgBuffer[c]=t[r+c];r+=e.SIGN_ALG_SIZE_BYTE;for(var s=0;s<e.SIGNATURE_SIZE_BYTE;s++)this.m_signatureBuffer[s]=t[r+s];n=!0}return n}}],[{key:"stringToBinary",value:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}},{key:"BinaryToString",value:function(e){return String.fromCharCode.apply(String,Object(vn["a"])(e))}}]),e}();kn.ID_SIZE_BYTE=16,kn.TARGET_SIZE_BYTE=16,kn.VERSION_SIZE_BYTE=1,kn.HASH_ALG_SIZE_BYTE=16,kn.SIGN_ALG_SIZE_BYTE=32,kn.SIGNATURE_SIZE_BYTE=256,kn.HEADER_SIZE_BYTE=kn.ID_SIZE_BYTE+kn.TARGET_SIZE_BYTE+kn.VERSION_SIZE_BYTE+kn.HASH_ALG_SIZE_BYTE+kn.SIGN_ALG_SIZE_BYTE+kn.SIGNATURE_SIZE_BYTE;var yn=function(){function e(){Object(j["a"])(this,e),this.m_header=new kn,this.m_firmware=new Uint8Array}return Object(y["a"])(e,[{key:"getHeader",value:function(){return this.m_header}},{key:"setHeader",value:function(e){this.m_header=e}},{key:"setFirmware",value:function(e){this.m_firmware=e}},{key:"serialize",value:function(){for(var e=0,t=this.m_header.serialize(),n=new Uint8Array(t.length+this.m_firmware.length),r=0;r<t.length;r++)n[r]=t[r];e+=t.length;for(var a=0;a<this.m_firmware.length;a++)n[e+a]=this.m_firmware[a];return n}},{key:"deserialize",value:function(e){for(var t=0,n=!1,r=new Uint8Array(kn.HEADER_SIZE_BYTE),a=0;a<kn.HEADER_SIZE_BYTE;a++)r[a]=e[a];n=this.m_header.deserialize(r),t+=kn.HEADER_SIZE_BYTE;for(var o=0;o<e.length-kn.HEADER_SIZE_BYTE;o++)this.m_firmware[o]=e[t+o];return n}}]),e}(),wn=n("81fa"),_n=(n("25f0"),function(){function e(){Object(j["a"])(this,e)}return Object(y["a"])(e,null,[{key:"binaryToHexString",value:function(e){for(var t="",n=0;n<e.length;n++){var r=(+e[n]).toString(16);r.length<2&&(r="0"+r),t+=r}return t}},{key:"hexStringToBinary",value:function(e){for(var t=0,n=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)n[t]=parseInt(e[r]+e[r+1],16),t++;return n}}]),e}()),Sn=function(){function e(){Object(j["a"])(this,e)}return Object(y["a"])(e,null,[{key:"sign",value:function(e,t){var n=new wn["KJUR"].crypto.Signature({alg:"SHA256withRSA"});return n.init(e),n.updateHex(_n.binaryToHexString(t)),_n.hexStringToBinary(n.sign())}}]),e}(),En=n("21a6"),Dn=n.n(En),In=Object(r["l"])({name:"Upload",components:{FirmwareCard:fn,TextDialog:ke},data:function(){return{options:[{name:"Upload signed firmware (.cpsfw)",key:"cpsfw"},{name:"Upload unsigned firmware (.bin) and RSA2048 signing key (.pem)",key:"bin"}],uploadOption:{name:"Upload unsigned firmware (.bin) and RSA2048 signing key (.pem)",key:"bin"},uploadProgressPercent:0,uploadActive:!1,update:!1,type:"no-yes",infoDialogVisible:!1,infoText:"",fnPtr:function(){console.log("empty")}}},methods:{uploadPackets:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,s,l,u,d,f,b,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.uploadActive=!0,t.uploadProgressPercent=0,r=2048,a=Math.floor(e.length/r),o=e.length%r,i=0,c=new Uint8Array(r),s=new Uint8Array(o),l=new v,u=!0,"ComPlatform"===t.$store.getters.selectedDevice.name?l.commandId="uploadcom":"Zumo32U4 Robot"===t.$store.getters.selectedDevice.name&&(l.commandId="uploadzumo"),l.jsonPayload=JSON.stringify({fileSizeBytes:e.length}),n.next=14,D.getInstance().makeRequest(l,t);case 14:if(d=n.sent,_.SUCCESS!==d.statusCode){n.next=46;break}w.debug("Successfully switched API into BINARY mode!"),f=0;case 18:if(!(f<a)){n.next=34;break}for(i=f*r,b=0;b<r;b++)c[b]=e[i+b];return n.next=23,D.getInstance().sendBinary(c,t);case 23:if(d=n.sent,_.SUCCESS==d.statusCode){n.next=30;break}return w.error("Could not upload data chunk! Aborting upload now!"),u=!1,n.abrupt("break",34);case 30:t.uploadProgressPercent=Math.round(f/a*100);case 31:f++,n.next=18;break;case 34:if(!0!==u){n.next=43;break}for(i=a*r,m=0;m<o;m++)s[m]=e[i+m];return n.next=39,D.getInstance().sendBinary(s,t);case 39:d=n.sent,_.SUCCESS!=d.statusCode?(w.error("Could not upload last data chunk!"),u=!1):t.uploadProgressPercent=100,n.next=44;break;case 43:w.error("Not sending remaining bytes because previous packet could not be sent!");case 44:n.next=47;break;case 46:w.error("Could not switch API into binary mode!");case 47:return t.uploadActive=!1,n.abrupt("return",new Promise((function(e){e(u)})));case 49:case"end":return n.stop()}}),n)})))()},upload:function(e){var t=this;this.uploadPackets(e).then((function(e){t.update=!t.update,!0===e?t.$toast.add({severity:"success",summary:"Upload Success",detail:"Successfully uploaded the firmware!",life:5e3}):t.$toast.add({severity:"error",summary:"Upload Error",detail:"Could not upload the firmware!",life:5e3}),t.infoDialogVisible=!0,t.infoText="Do you want to flash the uploaded firmware now?",t.fnPtr=function(){t.infoDialogVisible=!1,t.$router.push({name:"Flash",query:{autoFlash:"true"}})}}))},save:function(e,t){var n=this;this.infoDialogVisible=!0,this.infoText="Do you want to download the generated CPSFW file?",this.fnPtr=function(){n.infoDialogVisible=!1,Dn.a.saveAs(new Blob([e.buffer]),t.getTarget()+"_firmware_signed.cpsfw")}},uploadFirmware:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,s,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.files,a=new FileReader,o=new Uint8Array,i=new kn,c=new yn,l=r.filter((function(e){return e.name.endsWith(".bin")})),u=r.filter((function(e){return e.name.endsWith(".pem")})),d=r.filter((function(e){return e.name.endsWith(".cpsfw")})),"bin"===t.uploadOption.key?1===l.length&&1===u.length?("ComPlatform"===t.$store.getters.selectedDevice.name?i.setTarget("COM"):"Zumo32U4 Robot"===t.$store.getters.selectedDevice.name&&i.setTarget("ZUMO"),a.readAsArrayBuffer(l[0]),a.onload=function(e){o=new Uint8Array(a.result),c.setFirmware(o),a.readAsText(u[0]),a.onload=function(e){var n=Sn.sign(a.result,o);i.setSignature(n),c.setHeader(i),s=c.serialize(),t.upload(s),t.save(s,i)}}):t.$toast.add({severity:"error",summary:"Selection Error",detail:"Please select exactly one *.bin and one *.pem file!",life:5e3}):"cpsfw"===t.uploadOption.key&&(1===d.length?(a.readAsArrayBuffer(d[0]),a.onload=function(e){o=new Uint8Array(a.result),c=new yn,!0===c.deserialize(o)?(console.log(c),t.upload(o)):t.$toast.add({severity:"error",summary:"Deserialization Error",detail:"Could not deserialize the provided CPSFW file!",life:5e3})}):t.$toast.add({severity:"error",summary:"Selection Error",detail:"Please select exactly one *.cpsfw file!",life:5e3}));case 9:case"end":return n.stop()}}),n)})))()},flashFirmware:function(){this.infoDialogVisible=!1,this.$router.push({name:"Flash",query:{autoFlash:"true"}})}}});n("7558");In.render=jn,In.__scopeId="data-v-008a7dc4";var Cn=In,Tn=[{path:"/",name:"Home",component:et},{path:"/debug",name:"Debug",component:Yt},{path:"/flash",name:"Flash",component:mn},{path:"/upload",name:"Upload",component:Cn},{path:"/settings",name:"Settings",component:Vt}],An=Object(_e["a"])({history:Object(_e["b"])(),routes:Tn}),xn=An,Un=n("5502"),Bn=Object(Un["a"])({state:{currentUser:String,seletedDevice:String,showLoginDialg:Boolean},mutations:{setUser:function(e,t){e.currentUser=t},setDevice:function(e,t){e.seletedDevice=t},setLoginDialogVisibility:function(e,t){e.showLoginDialg=t}},getters:{currentUser:function(e){return e.currentUser},selectedDevice:function(e){return e.seletedDevice},loginDialogVisible:function(e){return e.showLoginDialg}}}),Rn=Bn,Pn=n("9319"),Ln=n("9899"),Vn=n("bb57"),Zn=n("0100"),Nn=n("485c"),$n=n("b3b6"),Hn=n("8398"),Fn=n("c045"),Yn=n("a469"),Mn=n("90eb"),Gn=n("2052"),Wn=n("e8f7"),qn=(n("098b"),n("e1ae"),n("4121"),Object(r["f"])(we));qn.use(Rn),qn.use(xn),qn.use(Pn["a"]),qn.use(Nn["a"]),qn.component("Card",Ln["a"]),qn.component("Button",Vn["a"]),qn.component("Dropdown",Zn["a"]),qn.component("Toast",$n["a"]),qn.component("InputText",Hn["a"]),qn.component("ProgressBar",Fn["a"]),qn.component("ProgressSpinner",Yn["a"]),qn.component("Toast",$n["a"]),qn.component("Menu",Mn["a"]),qn.component("Checkbox",Gn["a"]),qn.component("FileUpload",Wn["a"]),qn.mount("#app")},d41c:function(e,t,n){"use strict";n("4d91")},da36:function(e,t,n){"use strict";n("992d")},e5b8:function(e,t,n){},eb03:function(e,t,n){"use strict";n("95d4")},f38e:function(e,t,n){}});