(function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0fdd":function(e,t,n){},"12b7":function(e,t,n){"use strict";n("0fdd")},"18bf":function(e,t,n){"use strict";n("22b1")},"18f3":function(e,t,n){"use strict";n("6045")},"22b1":function(e,t,n){},"2e02":function(e,t,n){},"36f7":function(e,t,n){"use strict";n("2e02")},"3fec":function(e,t,n){},"543f":function(e,t,n){"use strict";n("9d4f")},"5c02":function(e,t,n){},6045:function(e,t,n){},"6e85":function(e,t,n){e.exports=n.p+"img/icons.5b128b85.svg"},"7e28":function(e,t,n){},"90dd":function(e,t,n){},"95d4":function(e,t,n){},"9d4f":function(e,t,n){},b6f3:function(e,t,n){},bd9b:function(e,t,n){},c43c:function(e,t,n){"use strict";n("3fec")},cb52:function(e,t,n){"use strict";n("bd9b")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={class:"complatform"},a={class:"header-view-container"};function i(e,t,n,i,s,c){var l=Object(r["D"])("Toast"),u=Object(r["D"])("Sidebar"),d=Object(r["D"])("Header"),f=Object(r["D"])("router-view"),b=Object(r["D"])("TextDialog");return Object(r["u"])(),Object(r["g"])("div",o,[Object(r["k"])(l,{position:"bottom-center"}),Object(r["k"])(u,{class:"sidebar"}),Object(r["k"])("div",a,[Object(r["k"])(d,{class:"header"}),Object(r["k"])(f,{class:"view"}),Object(r["k"])(b,{type:e.type,showTextDialog:e.infoDialogVisible,text:e.infoText},null,8,["type","showTextDialog","text"])])])}n("b0c0");var s=Object(r["P"])("data-v-36923855");Object(r["y"])("data-v-36923855");var c={class:"sidebar"},l={class:"top-nav"},u={class:"icon"},d={class:"icon"},f={class:"icon"},b={class:"bottom-nav"},m={class:"icon"},h={class:"icon"};Object(r["v"])();var g,O=s((function(e,t,o,a,i,g){var O=Object(r["D"])("Menu"),p=Object(r["D"])("router-link");return Object(r["u"])(),Object(r["g"])("div",c,["Zumo32U4 Robot"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])(O,{key:0,ref:"menu",model:e.zumoMenu,popup:!0},null,8,["model"])):"ComPlatform"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])(O,{key:1,ref:"menu",model:e.comMenu,popup:!0},null,8,["model"])):Object(r["h"])("",!0),Object(r["k"])("nav",l,[Object(r["k"])(p,{to:"/",class:"Home"},{default:s((function(){return[(Object(r["u"])(),Object(r["g"])("svg",u,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#home-white"},null,8,["xlink:href"])]))]})),_:1}),Object(r["k"])(p,{to:"/upload",class:"Upload"},{default:s((function(){return[(Object(r["u"])(),Object(r["g"])("svg",d,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#upload-white"},null,8,["xlink:href"])]))]})),_:1}),Object(r["k"])(p,{to:"/flash",class:"Flash"},{default:s((function(){return[(Object(r["u"])(),Object(r["g"])("svg",f,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#flash-white"},null,8,["xlink:href"])]))]})),_:1})]),Object(r["k"])("nav",b,[Object(r["k"])("div",{onClick:t[1]||(t[1]=function(){return e.resetClick&&e.resetClick.apply(e,arguments)})},[(Object(r["u"])(),Object(r["g"])("svg",m,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#reset-white"},null,8,["xlink:href"])]))]),Object(r["k"])(p,{to:"/settings",class:"Settings"},{default:s((function(){return[(Object(r["u"])(),Object(r["g"])("svg",h,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#settings-white"},null,8,["xlink:href"])]))]})),_:1})])])})),p=n("d4ec"),v=function e(){Object(p["a"])(this,e),this.commandId="",this.jsonPayload=""},j=n("1da1"),k=n("bee2");n("96cf"),n("d3b7");(function(e){e[e["LEVEL_INVALID"]=4]="LEVEL_INVALID",e[e["LEVEL_DEBUG"]=3]="LEVEL_DEBUG",e[e["LEVEL_INFO"]=2]="LEVEL_INFO",e[e["LEVEL_WARN"]=1]="LEVEL_WARN",e[e["LEVEL_ERROR"]=0]="LEVEL_ERROR"})(g||(g={}));var y=function(){function e(){Object(p["a"])(this,e)}return Object(k["a"])(e,null,[{key:"writeLog",value:function(e,t){e<=this.m_logLevel&&0<t.length&&console.log(t)}},{key:"setLogLevel",value:function(e){this.m_logLevel=e}},{key:"getLogLevel",value:function(){return this.m_logLevel}},{key:"debug",value:function(t){e.writeLog(g.LEVEL_DEBUG,"[+]\t"+t)}},{key:"info",value:function(t){e.writeLog(g.LEVEL_INFO,"[i]\t"+t)}},{key:"warn",value:function(t){e.writeLog(g.LEVEL_WARN,"[!]\t"+t)}},{key:"error",value:function(t){e.writeLog(g.LEVEL_ERROR,"[-]\t"+t)}}]),e}();y.m_logLevel=g.LEVEL_DEBUG;var w,_=function(){function e(){Object(p["a"])(this,e),this.m_host="wss://complatform.local/api",this.m_socketClient=new WebSocket(this.m_host),y.debug("Trying to connect to WebSocket host at "+this.m_host)}return Object(k["a"])(e,[{key:"onOpen",value:function(e){this.m_socketClient.onopen=e}},{key:"onClose",value:function(e){this.m_socketClient.onclose=e}},{key:"onError",value:function(e){this.m_socketClient.onerror=e}},{key:"onMessage",value:function(e){this.m_socketClient.onmessage=e}},{key:"disconnect",value:function(){y.debug("Trying to close WebSocket connection!"),this.m_socketClient.close()}},{key:"getState",value:function(){return this.m_socketClient.readyState}},{key:"send",value:function(e){var t=!1;return WebSocket.OPEN==this.getState()&&(this.m_socketClient.send(e),t=!0),!1===t&&y.error("Could not send WebSocket data because connection is not opened!"),t}}],[{key:"getInstance",value:function(){return this.m_instance||(this.m_instance=new e,y.debug("New WebSocketClient instance created!")),this.m_instance}}]),e}();(function(e){e[e["SUCCESS"]=200]="SUCCESS",e[e["BAD_REQUEST"]=400]="BAD_REQUEST",e[e["UNAUTHORIZED"]=401]="UNAUTHORIZED",e[e["FORBIDDEN"]=403]="FORBIDDEN",e[e["NOT_FOUND"]=404]="NOT_FOUND",e[e["METHOD_NOT_ALLOWED"]=405]="METHOD_NOT_ALLOWED",e[e["ERROR"]=500]="ERROR",e[e["NOT_IMPLEMENTED"]=501]="NOT_IMPLEMENTED"})(w||(w={}));var S=function e(){Object(p["a"])(this,e),this.statusCode=w.ERROR,this.jsonPayload=""},E=function(){function e(){Object(p["a"])(this,e),this.m_wsClient=_.getInstance()}return Object(k["a"])(e,[{key:"makeRequest",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r,o=this,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.abrupt("return",new Promise((function(e){var a=new S;!0===o.m_wsClient.send(JSON.stringify(t))?o.m_wsClient.onMessage((function(o){a=JSON.parse(o.data),w.SUCCESS===a.statusCode?(y.debug("Successfully executed ApiRequest command "+t.commandId),e(a)):w.UNAUTHORIZED===a.statusCode?(y.debug("Unauthorized access to ApiRequest command "+t.commandId),n.$toast.add({severity:"warn",summary:"Missing Permission",detail:"You do not have the required permission to execute the command "+t.commandId+". Either you dont have the permission or your session timed out!",life:5e3}),n.$store.commit("setLoginDialogVisibility",!0),e(a)):(!1===r&&n.$toast.add({severity:"error",summary:"API Service error",detail:"Could not execute command "+t.commandId+"!\nRepsonse Code: "+w[a.statusCode],life:5e3}),e(a))})):(y.debug("Fatal server error occured while sending ApiRequest command "+t.commandId),a.statusCode=w.ERROR,n.$toast.add({severity:"error",summary:"Fatal Server Error",detail:"A fatal server communication error occured!",life:5e3}),e(a))})));case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sendBinary",value:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var o=new S;!0===r.m_wsClient.send(t)?r.m_wsClient.onMessage((function(r){o=JSON.parse(r.data),w.SUCCESS===o.statusCode?y.debug("Successfully sent binary chunk with "+t.length+" bytes"):w.UNAUTHORIZED===o.statusCode?(y.warn("Unauthorized to send binary chunk!"),n.$toast.add({severity:"warn",summary:"Missing Permission",detail:"You do not have the required permission to send binary data!\nRepsonse Code: "+w[o.statusCode],life:5e3})):n.$toast.add({severity:"error",summary:"API Service error",detail:"Could not send binary data!\nRepsonse Code: "+w[o.statusCode],life:5e3}),e(o)})):(y.error("Fatal server error occured while sending binary data"),o.statusCode=w.ERROR,n.$toast.add({severity:"error",summary:"Fatal Server Error",detail:"A fatal server communication error occured!",life:5e3}),e(o))})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}],[{key:"getInstance",value:function(){return this.m_reqResHandler}}]),e}();E.m_reqResHandler=new E;var D=Object(r["l"])({name:"Sidebar",data:function(){var e=this;return{zumoMenu:[{label:"Reboot Zumo32U4 Robot",icon:"pi pi-power-off",command:function(){var t=new v;t.commandId="rebootzumo",E.getInstance().makeRequest(t,e)}}],comMenu:[{label:"Reboot ComPlatform",icon:"pi pi-power-off",command:function(){var t=new v;t.commandId="rebootcom",E.getInstance().makeRequest(t,e)}}]}},methods:{resetClick:function(e){this.$refs.menu.toggle(e)}}});n("c43c");D.render=O,D.__scopeId="data-v-36923855";var I=D,C=Object(r["P"])("data-v-2d3321b5");Object(r["y"])("data-v-2d3321b5");var T={class:"header"},A={class:"header-ui"},x={class:"device-selection"},U={key:0,class:"device-icon"},R={key:1,class:"device-icon"},B={class:"user-selection"},P={key:0,class:"username-label"},L={key:0,class:"username-icon"};Object(r["v"])();var V=C((function(e,t,o,a,i,s){var c=Object(r["D"])("Menu"),l=Object(r["D"])("Dropdown"),u=Object(r["D"])("Button"),d=Object(r["D"])("LoginDialog");return Object(r["u"])(),Object(r["g"])(r["a"],null,[Object(r["k"])("div",T,[Object(r["k"])("div",A,[Object(r["k"])("div",x,[Object(r["k"])(c,{ref:"menu",model:e.menuEntries,popup:!0},null,8,["model"]),Object(r["k"])(l,{modelValue:e.selectedDevice,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedDevice=t}),options:e.devices,optionLabel:"name",placeholder:"Select a Device"},null,8,["modelValue","options"]),"ComPlatform"===e.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("svg",U,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#complatform-white"},null,8,["xlink:href"])])):"Zumo32U4 Robot"===e.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("svg",R,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#zumorobot-white"},null,8,["xlink:href"])])):Object(r["h"])("",!0)]),Object(r["k"])("div",B,["null"!=e.currentUser?(Object(r["u"])(),Object(r["g"])("p",P,Object(r["H"])(e.currentUser),1)):Object(r["h"])("",!0),Object(r["k"])("div",{onClick:t[2]||(t[2]=function(){return e.userIconClick&&e.userIconClick.apply(e,arguments)})},["null"!=e.currentUser?(Object(r["u"])(),Object(r["g"])("svg",L,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#user-white"},null,8,["xlink:href"])])):Object(r["h"])("",!0)]),"null"==e.currentUser?(Object(r["u"])(),Object(r["g"])(u,{key:1,label:"Sign in",icon:"pi pi-user",iconPos:"right",class:"p-button-rounded",onClick:e.signIn},null,8,["onClick"])):Object(r["h"])("",!0)])])]),Object(r["k"])(d,{show:e.showLoginDialog},null,8,["show"])],64)})),Z=Object(r["P"])("data-v-01c91dbe");Object(r["y"])("data-v-01c91dbe");var N={class:"dialog-background"},$={class:"login-dialog"},H=Object(r["k"])("h1",null,"Please enter your user credentials!",-1),F={class:"form"},Y={class:"p-float-label p-input-icon-left"},M=Object(r["k"])("i",{class:"pi pi-user"},null,-1),G=Object(r["k"])("label",{for:"username"},"Username",-1),q={class:"p-float-label p-input-icon-left"},W=Object(r["k"])("i",{class:"pi pi-key"},null,-1),z=Object(r["k"])("label",{for:"password"},"Password",-1),J={key:0,class:"error-container"},K={class:"error-icon"},Q=Object(r["k"])("p",{class:"error-label"}," Could not sign in with provided user credentials! ",-1),X={class:"buttons"};Object(r["v"])();var ee=Z((function(e,t,o,a,i,s){var c=Object(r["D"])("InputText"),l=Object(r["D"])("ProgressBar"),u=Object(r["D"])("Button");return Object(r["u"])(),Object(r["g"])(r["b"],{to:"body"},[Object(r["N"])(Object(r["k"])("div",N,[Object(r["k"])("div",$,[H,Object(r["k"])("div",F,[Object(r["k"])("span",Y,[M,Object(r["k"])(c,{id:"username",type:"text",modelValue:e.usercredentials.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.usercredentials.username=t})},null,8,["modelValue"]),G]),Object(r["k"])("span",q,[W,Object(r["k"])(c,{id:"password",type:"password",modelValue:e.usercredentials.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.usercredentials.password=t})},null,8,["modelValue"]),z])]),!1===e.loginSuccess?(Object(r["u"])(),Object(r["g"])("div",J,[(Object(r["u"])(),Object(r["g"])("svg",K,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#error-red"},null,8,["xlink:href"])])),Q])):Object(r["h"])("",!0),!0===e.spinnerVisible?(Object(r["u"])(),Object(r["g"])(l,{key:1,class:"progress-bar",mode:"indeterminate"})):Object(r["h"])("",!0),Object(r["k"])("div",X,[Object(r["k"])(u,{label:"Cancel",icon:"pi pi-times",iconPos:"right",class:"p-button-rounded p-button-danger",onClick:t[3]||(t[3]=function(t){return e.cancelClick()})}),Object(r["k"])(u,{label:"Login",icon:"pi pi-sign-in",iconPos:"right",class:"p-button-rounded",onClick:t[4]||(t[4]=function(t){return e.signInClick()})})])])],512),[[r["K"],e.showLoginDialog]])])})),te=function e(){Object(p["a"])(this,e),this.username="",this.password=""},ne=Object(r["l"])({name:"LoginDialog",computed:{showLoginDialog:{get:function(){return this.$store.getters.loginDialogVisible},set:function(e){this.$store.commit("setLoginDialogVisibility",e)}}},data:function(){return{usercredentials:new te,spinnerVisible:!1,loginSuccess:!0}},methods:{reset:function(){this.showLoginDialog=!1,this.spinnerVisible=!1,this.loginSuccess=!0},cancelClick:function(){this.reset()},signInClick:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.spinnerVisible=!0,n=new v,n.commandId="authenticate",n.jsonPayload=JSON.stringify(e.usercredentials),E.getInstance().makeRequest(n,e).then((function(t){t.statusCode==w.SUCCESS?(e.$store.commit("setUser",e.usercredentials.username),e.reset(),e.$toast.add({severity:"success",summary:"Login Success",detail:"Successfully signed in!",life:5e3}),y.debug("Successfully logged in!")):(e.$store.commit("setUser","null"),e.loginSuccess=!1,e.spinnerVisible=!1,y.debug("Could not log in!"))}));case 5:case"end":return t.stop()}}),t)})))()}}});n("36f7");ne.render=ee,ne.__scopeId="data-v-01c91dbe";var re=ne,oe=Object(r["l"])({name:"Header",data:function(){var e=this;return{devices:[{name:"Zumo32U4 Robot"},{name:"ComPlatform"}],menuEntries:[{label:"Sign out",icon:"pi pi-sign-out",command:function(){var t=new v;t.commandId="deauthenticate",E.getInstance().makeRequest(t,e).then((function(t){t.statusCode==w.SUCCESS&&(e.$store.commit("setUser","null"),y.info("Successfully signed out!"))}))}}]}},components:{LoginDialog:re},computed:{selectedDevice:{get:function(){return this.$store.getters.selectedDevice},set:function(e){this.$store.commit("setDevice",e)}},currentUser:{get:function(){return this.$store.getters.currentUser},set:function(e){this.$store.commit("setUser",e)}}},methods:{signIn:function(){this.$store.commit("setLoginDialogVisibility",!0)},userIconClick:function(e){this.$refs.menu.toggle(e)}}});n("18bf");oe.render=V,oe.__scopeId="data-v-2d3321b5";var ae=oe,ie=Object(r["P"])("data-v-5c9952b2");Object(r["y"])("data-v-5c9952b2");var se={class:"dialog-background"},ce={class:"dialog-container"},le={key:0},ue={class:"text-block"},de={key:1},fe={class:"text-block"},be={class:"button-container"},me=Object(r["j"])("Confirm"),he={key:2},ge={class:"text-block"},Oe={class:"button-container"};Object(r["v"])();var pe=ie((function(e,t,o,a,i,s){var c=Object(r["D"])("ProgressSpinner"),l=Object(r["D"])("Button");return Object(r["u"])(),Object(r["g"])(r["b"],{to:"body"},[Object(r["N"])(Object(r["k"])("div",se,[Object(r["k"])("div",ce,["info"===e.type?(Object(r["u"])(),Object(r["g"])("div",le,[(Object(r["u"])(),Object(r["g"])("svg",null,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#info-black"},null,8,["xlink:href"])])),Object(r["k"])("p",ue,Object(r["H"])(e.text),1),Object(r["k"])(c)])):"confirm"===e.type?(Object(r["u"])(),Object(r["g"])("div",de,[(Object(r["u"])(),Object(r["g"])("svg",null,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#question-black"},null,8,["xlink:href"])])),Object(r["k"])("p",fe,Object(r["H"])(e.text),1),Object(r["k"])("div",be,[Object(r["k"])(l,{class:"p-button-rounded p-button-success",onClick:t[1]||(t[1]=function(t){return e.$emit("accepted")})},{default:ie((function(){return[me]})),_:1})])])):"no-yes"===e.type?(Object(r["u"])(),Object(r["g"])("div",he,[(Object(r["u"])(),Object(r["g"])("svg",null,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#question-black"},null,8,["xlink:href"])])),Object(r["k"])("p",ge,Object(r["H"])(e.text),1),Object(r["k"])("div",Oe,[Object(r["k"])(l,{label:"Abort",class:"p-button-rounded p-button-danger",onClick:t[2]||(t[2]=function(t){return e.$emit("declined")})}),Object(r["k"])(l,{label:"Accept",class:"p-button-rounded p-button-success",onClick:t[3]||(t[3]=function(t){return e.$emit("accepted")})})])])):Object(r["h"])("",!0)])],512),[[r["K"],e.showTextDialog]])])})),ve=Object(r["l"])({name:"TextDialog",props:["showTextDialog","type","text"]});n("12b7");ve.render=pe,ve.__scopeId="data-v-5c9952b2";var je=ve,ke=Object(r["l"])({name:"App",components:{Sidebar:I,Header:ae,TextDialog:je},data:function(){return{type:"info",infoDialogVisible:!1,infoText:"Connecting to Server. Please wait ..."}},beforeCreate:function(){_.getInstance(),this.$store.commit("setDevice",{name:"Zumo32U4 Robot"}),this.$store.commit("setUser","null"),this.$store.commit("setLoginDialogVisibility",!1)},methods:{registerWSEvents:function(){var e=this;_.getInstance().onOpen((function(){e.infoDialogVisible=!1,e.$toast.add({severity:"success",summary:"Connected",detail:"Successfully connected to server!",life:5e3}),y.debug("New WebSocket connection opened!")})),_.getInstance().onClose((function(){e.infoDialogVisible=!0,e.$store.commit("setUser","null"),y.debug("WebSocket connection closed!")})),_.getInstance().onError((function(){e.infoDialogVisible=!0,e.$store.commit("setUser","null"),e.$toast.add({severity:"error",summary:"Server Connection Error",detail:"A fatal connection error occured! Reconnecting in two seconds!",life:5e3}),y.debug("Fatal WebSocket error occured! Reconnecting in two seconds!"),setTimeout((function(){e.$router.go(0)}),2e3)}))}},mounted:function(){this.infoDialogVisible=!0,this.registerWSEvents()}});n("e58a");ke.render=i;var ye=ke,we=n("6c02"),_e=Object(r["P"])("data-v-e9642996");Object(r["y"])("data-v-e9642996");var Se={class:"home"},Ee=Object(r["k"])("div",{class:"text-container"},[Object(r["k"])("h1",{class:"welcome-text"}," Speed up your Embedded System Development with the ComPlatform! "),Object(r["k"])("h2",{class:"sub-welcome-text"}," Upload your Firmware faster and easier than ever before! ")],-1),De={class:"card-container"},Ie=Object(r["j"])("Configuration made easy!"),Ce={class:"card-icon"},Te=Object(r["j"])(" The ComPlatform system allows you to enable or disable the WiFi station mode and provides an easy configuration interface for you to configure the network credentials which are used to connect to an external WiFi access point! "),Ae=Object(r["j"])("Intuitive Power Management!"),xe={class:"card-icon"},Ue=Object(r["j"])(" The firmware you wrote and flashed halts your system? No worries! The web interface of the ComPlatform makes it easy to reboot both the ComPlatform system as well as the attached Zumo32U4 robot with ease! "),Re=Object(r["j"])("Upload & Flash your Firmware? Done."),Be={class:"card-icon"},Pe=Object(r["j"])(" Cable spaghetti, annoying USB cables and the need to catch the robot and attach it to your computer each time you want to update your firmware? Are you familiar with this struggle? With the help of the ComPlatform you no longer have to loose any nerves on this issue! Simply upload your new firmware onto the ComPlatform and flash it! The intuitive OTA service allows you to update the firmware of the attached Zumo32U4 robot as well as the attached ComPlatform system itself! "),Le=Object(r["j"])("Powerful User Management & Easy to extend"),Ve={class:"card-icon"},Ze=Object(r["j"])(" The ComPlatform offers a powerful user management system where each user can have its own user account, protected by a securely stored password. Each user has a specific set of rights, which decides which operations are allowed to be executed. Adding new API services to the ComPlatform is super easy! Just write your service and integrate it into the ComPlatform! Read the docs and get started now! "),Ne=Object(r["j"])("A Hacker's Nightmare!"),$e={class:"card-icon"},He=Object(r["j"])(" The ComPlatform project focuses on information security! Specified API services require user authentication and specific user rights. The entire data traffic is fully encrypted, all user passwords are securely stored and all uploaded firmware images have to be cryptographically signed with a private key, otherwise they won't be flashed! ");Object(r["v"])();var Fe=_e((function(e,t,o,a,i,s){var c=Object(r["D"])("Card");return Object(r["u"])(),Object(r["g"])("div",Se,[Ee,Object(r["k"])("div",De,[Object(r["k"])(c,{class:"info-card"},{title:_e((function(){return[Ie]})),header:_e((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Ce,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#settings-black"},null,8,["xlink:href"])]))]})),content:_e((function(){return[Te]})),_:1}),Object(r["k"])(c,{class:"info-card"},{title:_e((function(){return[Ae]})),header:_e((function(){return[(Object(r["u"])(),Object(r["g"])("svg",xe,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#reset-black"},null,8,["xlink:href"])]))]})),content:_e((function(){return[Ue]})),_:1}),Object(r["k"])(c,{class:"info-card"},{title:_e((function(){return[Re]})),header:_e((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Be,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#flash-black"},null,8,["xlink:href"])]))]})),content:_e((function(){return[Pe]})),_:1}),Object(r["k"])(c,{class:"info-card"},{title:_e((function(){return[Le]})),header:_e((function(){return[(Object(r["u"])(),Object(r["g"])("svg",Ve,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#user-black"},null,8,["xlink:href"])]))]})),content:_e((function(){return[Ze]})),_:1}),Object(r["k"])(c,{class:"info-card"},{title:_e((function(){return[Ne]})),header:_e((function(){return[(Object(r["u"])(),Object(r["g"])("svg",$e,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#security-black"},null,8,["xlink:href"])]))]})),content:_e((function(){return[He]})),_:1})])])})),Ye=n("262e"),Me=n("2caf"),Ge=n("9ab4"),qe=n("ce1f"),We=function(e){Object(Ye["a"])(n,e);var t=Object(Me["a"])(n);function n(){return Object(p["a"])(this,n),t.apply(this,arguments)}return n}(qe["b"]);We=Object(Ge["a"])([Object(qe["a"])({components:{}})],We);var ze=We;n("d710");ze.render=Fe,ze.__scopeId="data-v-e9642996";var Je=ze,Ke=Object(r["P"])("data-v-3a828858");Object(r["y"])("data-v-3a828858");var Qe={class:"settings"},Xe={key:0,class:"settings-view"},et={key:1,class:"settings-view"},tt={class:"info-pane"},nt={class:"info-image"},rt=Object(r["k"])("h1",{class:"info-text"},"No menu entry selected",-1);Object(r["v"])();var ot=Ke((function(e,t,o,a,i,s){var c=Object(r["D"])("SettingsMenu"),l=Object(r["D"])("ConnectivityCOM");return Object(r["u"])(),Object(r["g"])("div",Qe,[Object(r["k"])(c,{class:"settings-menu",onEntryClick:e.entryClick},null,8,["onEntryClick"]),"connectivity-com"===e.selectedMenuEntry&&!1===e.hideView?(Object(r["u"])(),Object(r["g"])("div",Xe,[Object(r["k"])(l)])):(Object(r["u"])(),Object(r["g"])("div",et,[Object(r["k"])("div",tt,[(Object(r["u"])(),Object(r["g"])("svg",nt,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#info-black"},null,8,["xlink:href"])])),rt])]))])})),at=Object(r["P"])("data-v-211ad0da");Object(r["y"])("data-v-211ad0da");var it={class:"settings-menu"},st={key:0,class:"com-settings"},ct={class:"entry-icon"},lt=Object(r["k"])("h1",{class:"entry-text"},"Connectivity",-1),ut={key:1,class:"zumo-settings"},dt={class:"info-pane"},ft={class:"info-image"},bt=Object(r["k"])("h1",{class:"info-text"},"No Settings available",-1);Object(r["v"])();var mt=at((function(e,t,o,a,i,s){return Object(r["u"])(),Object(r["g"])("div",it,["ComPlatform"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("div",st,[Object(r["k"])("div",{class:"menu-entry",onClick:t[1]||(t[1]=function(t){return e.$emit("entry-click",t,"connectivity-com")})},[(Object(r["u"])(),Object(r["g"])("svg",ct,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#wifi-black"},null,8,["xlink:href"])])),lt])])):"Zumo32U4 Robot"===e.$store.getters.selectedDevice.name?(Object(r["u"])(),Object(r["g"])("div",ut,[Object(r["k"])("div",dt,[(Object(r["u"])(),Object(r["g"])("svg",ft,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#info-black"},null,8,["xlink:href"])])),bt])])):Object(r["h"])("",!0)])})),ht=Object(r["l"])({name:"SettingsMenu"});n("eb03");ht.render=mt,ht.__scopeId="data-v-211ad0da";var gt=ht,Ot=Object(r["P"])("data-v-6fa4221e");Object(r["y"])("data-v-6fa4221e");var pt={class:"connectivity-settings-container"},vt=Object(r["j"])("STA-Mode Network Credentials"),jt={class:"card-icon"},kt=Object(r["k"])("label",{for:"sta-checkbox"},"Use STA-Mode",-1),yt={class:"card-content-container"},wt={key:0,class:"p-float-label p-input-icon-left"},_t=Object(r["k"])("i",{class:"pi pi-wifi"},null,-1),St=Object(r["k"])("label",{for:"ssid"},"SSID",-1),Et={key:1,class:"p-float-label p-input-icon-left"},Dt=Object(r["k"])("i",{class:"pi pi-key"},null,-1),It=Object(r["k"])("label",{for:"passphrase"},"Passphrase",-1);Object(r["v"])();var Ct=Ot((function(e,t,o,a,i,s){var c=Object(r["D"])("TextDialog"),l=Object(r["D"])("Checkbox"),u=Object(r["D"])("InputText"),d=Object(r["D"])("Button"),f=Object(r["D"])("Card");return Object(r["u"])(),Object(r["g"])(r["a"],null,[Object(r["k"])(c,{type:e.type,showTextDialog:e.confirmDialogVisible,text:e.infoText,onDeclined:e.declineClick,onAccepted:e.acceptClick},null,8,["type","showTextDialog","text","onDeclined","onAccepted"]),Object(r["k"])("div",pt,[Object(r["k"])(f,{class:"settings-card"},{title:Ot((function(){return[vt]})),header:Ot((function(){return[(Object(r["u"])(),Object(r["g"])("svg",jt,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#block-black"},null,8,["xlink:href"])]))]})),content:Ot((function(){return[Object(r["k"])("div",null,[Object(r["k"])(l,{id:"sta-checkbox",modelValue:e.useSTAMode,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.useSTAMode=t}),binary:!0},null,8,["modelValue"]),kt]),Object(r["k"])("div",yt,[!0===e.useSTAMode?(Object(r["u"])(),Object(r["g"])("span",wt,[_t,Object(r["k"])(u,{id:"ssid",type:"text",modelValue:e.credentials.ssid,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.credentials.ssid=t})},null,8,["modelValue"]),St])):Object(r["h"])("",!0),!0===e.useSTAMode?(Object(r["u"])(),Object(r["g"])("span",Et,[Dt,Object(r["k"])(u,{id:"passphrase",type:"password",modelValue:e.credentials.passphrase,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.credentials.passphrase=t})},null,8,["modelValue"]),It])):Object(r["h"])("",!0),Object(r["k"])(d,{label:"Save",icon:"pi pi-save",iconPos:"right",class:"p-button-rounded",onClick:t[4]||(t[4]=function(t){return e.save()})})])]})),_:1})])],64)})),Tt=function e(){Object(p["a"])(this,e),this.ssid="",this.passphrase=""},At=Object(r["l"])({name:"ConnectivityCOM",data:function(){return{credentials:new Tt,useSTAMode:!0,type:"no-yes",confirmDialogVisible:!1,infoText:"In order for the changes to take effect, the ComPlatform needs to be rebooted. Do you want to reboot the ComPlatform now?"}},components:{TextDialog:je},methods:{save:function(){var e=this,t=new v;t.commandId="setstacredentials",!0===this.useSTAMode&&(t.jsonPayload=JSON.stringify(this.credentials)),E.getInstance().makeRequest(t,this).then((function(t){t.statusCode==w.SUCCESS&&(e.confirmDialogVisible=!0)}))},declineClick:function(){this.confirmDialogVisible=!1},acceptClick:function(){var e=this;this.confirmDialogVisible=!1;var t=new v;t.commandId="rebootcom",E.getInstance().makeRequest(t,this).then((function(t){t.statusCode==w.SUCCESS&&setTimeout((function(){e.$router.go(0)}),2e3)}))}}});n("d065");At.render=Ct,At.__scopeId="data-v-6fa4221e";var xt=At,Ut=Object(r["l"])({name:"Settings",data:function(){return{selectedMenuEntry:"null",hideView:!1}},components:{SettingsMenu:gt,ConnectivityCOM:xt},methods:{entryClick:function(e,t){this.hideView=!1,this.selectedMenuEntry=t}},watch:{"$store.state.seletedDevice.name":function(e,t){this.hideView=e!=t}}});n("543f");Ut.render=ot,Ut.__scopeId="data-v-3a828858";var Rt=Ut,Bt=Object(r["P"])("data-v-04fa7e9d");Object(r["y"])("data-v-04fa7e9d");var Pt={class:"flash"};Object(r["v"])();var Lt=Bt((function(e,t,n,o,a,i){var s=Object(r["D"])("TextDialog"),c=Object(r["D"])("FirmwareCard"),l=Object(r["D"])("Button");return Object(r["u"])(),Object(r["g"])("div",Pt,[Object(r["k"])(s,{type:e.type,showTextDialog:e.confirmDialogVisible,text:e.infoText,onDeclined:t[1]||(t[1]=function(t){return e.confirmDialogVisible=!1}),onAccepted:e.flash},null,8,["type","showTextDialog","text","onAccepted"]),Object(r["k"])(c,{class:"firmware-card"}),Object(r["k"])(l,{label:"Flash firmware now!",icon:"pi pi-chevron-circle-right",iconPos:"right",class:"p-button-lg p-button-rounded",onClick:t[2]||(t[2]=function(t){return e.confirmDialogVisible=!0}),disabled:!e.flashEnabled},null,8,["disabled"])])})),Vt=Object(r["P"])("data-v-43fb8220");Object(r["y"])("data-v-43fb8220");var Zt={class:"firmware-card"},Nt={class:"card-container"},$t=Object(r["j"])("Firmware available"),Ht={key:0,class:"card-icon"},Ft={key:1,class:"card-icon"},Yt={class:"card-content"},Mt=Object(r["k"])("b",null,"Target:",-1),Gt=Object(r["k"])("b",null,"SHA256:",-1),qt=Object(r["k"])("b",null,"Valid:",-1),Wt=Object(r["k"])("b",null,"Bytes:",-1),zt={key:0,class:"error-container"},Jt={class:"error-icon"},Kt=Object(r["k"])("p",{class:"error-label"}," Invalid firmware! You cannot flash this image! ",-1);Object(r["v"])();var Qt=Vt((function(e,t,o,a,i,s){var c=Object(r["D"])("Card");return Object(r["u"])(),Object(r["g"])("div",Zt,[Object(r["k"])("div",Nt,[Object(r["k"])(c,{class:"firmware-card"},Object(r["i"])({header:Vt((function(){return[!0===e.firmwareAvailable?(Object(r["u"])(),Object(r["g"])("svg",Ht,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#success-black"},null,8,["xlink:href"])])):(Object(r["u"])(),Object(r["g"])("svg",Ft,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#error-black"},null,8,["xlink:href"])]))]})),_:2},[!0===e.firmwareAvailable?{name:"title",fn:Vt((function(){return[$t]}))}:{name:"title",fn:Vt((function(){return[Object(r["j"])("No Firmware available!")]}))},!0===e.firmwareAvailable?{name:"content",fn:Vt((function(){return[Object(r["k"])("div",Yt,[Object(r["k"])("h2",null,[Mt,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.targetSystem),1)]),Object(r["k"])("h2",null,[Gt,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.payloadHash),1)]),Object(r["k"])("h2",null,[qt,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.isValid),1)]),Object(r["k"])("h2",null,[Wt,Object(r["j"])(" "+Object(r["H"])(e.fwInfo.sizeBytes),1)])]),!1===e.fwInfo.isValid?(Object(r["u"])(),Object(r["g"])("div",zt,[(Object(r["u"])(),Object(r["g"])("svg",Jt,[Object(r["k"])("use",{"xlink:href":n("6e85")+"#error-red"},null,8,["xlink:href"])])),Kt])):Object(r["h"])("",!0)]}))}:void 0]),1024)])])})),Xt=function e(){Object(p["a"])(this,e),this.targetSystem="",this.sizeBytes=0,this.payloadHash="",this.isValid=!1},en=Object(r["l"])({name:"FirmwareCard",props:["update"],computed:{selectedDevice:function(){return this.$store.getters.selectedDevice.name}},data:function(){return{firmwareAvailable:!1,fwInfo:new Xt}},mounted:function(){this.updateFirmwareCard()},watch:{update:function(e,t){e!=t&&this.updateFirmwareCard()},selectedDevice:function(e,t){e!=t&&this.updateFirmwareCard()}},methods:{updateFirmwareCard:function(){var e=this,t="";"Zumo32U4 Robot"===this.$store.getters.selectedDevice.name?t="ZUMO":"ComPlatform"===this.$store.getters.selectedDevice.name&&(t="COM");var n=new v;n.commandId="getfirmwareinfo",n.jsonPayload=JSON.stringify({target:t}),E.getInstance().makeRequest(n,this,!0).then((function(t){y.debug("Got FirmwareInfo response"),t.statusCode==w.SUCCESS?(e.firmwareAvailable=!0,e.fwInfo=JSON.parse(t.jsonPayload)):e.firmwareAvailable=!1}))}}});n("18f3");en.render=Qt,en.__scopeId="data-v-43fb8220";var tn=en,nn=Object(r["l"])({name:"Flash",data:function(){return{type:"no-yes",flashEnabled:!0,confirmDialogVisible:!1,infoText:"Are you sure you want to flash the firmware now? This process can brick your device!"}},components:{FirmwareCard:tn,TextDialog:je},mounted:function(){var e=this.$route.query.autoFlash;e&&"true"===e&&(y.info("Auto-flashing enabled. Flashing firmware image now!"),this.flash())},methods:{flash:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new v,n.commandId="getfirmwareinfo","ComPlatform"===e.$store.getters.selectedDevice.name?n.jsonPayload=JSON.stringify({target:"COM"}):"Zumo32U4 Robot"===e.$store.getters.selectedDevice.name&&(n.jsonPayload=JSON.stringify({target:"ZUMO"})),t.next=5,E.getInstance().makeRequest(n,e);case 5:if(r=t.sent,n.jsonPayload="",o=JSON.parse(r.jsonPayload),1!=o.isValid){t.next=16;break}return"ComPlatform"===e.$store.getters.selectedDevice.name?n.commandId="flashcom":"Zumo32U4 Robot"===e.$store.getters.selectedDevice.name&&(n.commandId="flashzumo"),t.next=12,E.getInstance().makeRequest(n,e);case 12:r=t.sent,w.SUCCESS===r.statusCode?(e.$toast.add({severity:"success",summary:"Flash Success",detail:"Successfully flashed the firmware onto the target platform!",life:5e3}),"uploadcom"===n.commandId&&(e.$toast.add({severity:"info",summary:"Rebooting ComPlatform",detail:"In order for the changes to take effect, the ComPlatform will be rebooted in 2 seconds!",life:5e3}),setTimeout((function(){e.$router.go(0)}),5e3),setTimeout((function(){n.commandId="rebootcom",E.getInstance().makeRequest(n,e)}),2e3))):e.$toast.add({severity:"error",summary:"Flash Error",detail:"Could not flash the firmware onto the target platform!",life:5e3}),t.next=17;break;case 16:e.$toast.add({severity:"error",summary:"Flash Error",detail:"Uploaded firmware is invalid and cannot be flashed!",life:5e3});case 17:case"end":return t.stop()}}),t)})))()}}});n("fecb");nn.render=Lt,nn.__scopeId="data-v-04fa7e9d";var rn=nn,on=Object(r["P"])("data-v-3c4b0ba2");Object(r["y"])("data-v-3c4b0ba2");var an={class:"upload"},sn=Object(r["k"])("p",null,"Drag and drop .cpsfw file here to upload it!",-1),cn=Object(r["k"])("p",null," Drag and drop .bin and .pem files here to sign the firmware and upload the generated firmware! ",-1);Object(r["v"])();var ln=on((function(e,t,n,o,a,i){var s=Object(r["D"])("TextDialog"),c=Object(r["D"])("FirmwareCard"),l=Object(r["D"])("Dropdown"),u=Object(r["D"])("FileUpload"),d=Object(r["D"])("ProgressBar");return Object(r["u"])(),Object(r["g"])("div",an,[Object(r["k"])(s,{type:e.type,showTextDialog:e.infoDialogVisible,text:e.infoText,onDeclined:t[1]||(t[1]=function(t){return e.infoDialogVisible=!1}),onAccepted:e.fnPtr},null,8,["type","showTextDialog","text","onAccepted"]),Object(r["k"])(c,{update:e.update},null,8,["update"]),Object(r["k"])(l,{class:"dropdown",modelValue:e.uploadOption,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.uploadOption=t}),options:e.options,optionLabel:"name",placeholder:"Select an upload option"},null,8,["modelValue","options"]),"cpsfw"===e.uploadOption.key?(Object(r["u"])(),Object(r["g"])(u,{key:0,name:"demo[]",accept:".cpsfw",customUpload:!0,fileLimit:1,onUploader:e.uploadFirmware},{empty:on((function(){return[sn]})),_:1},8,["onUploader"])):"bin"===e.uploadOption.key?(Object(r["u"])(),Object(r["g"])(u,{key:1,name:"demo[]",accept:".bin,.pem",customUpload:!0,fileLimit:2,onUploader:e.uploadFirmware},{empty:on((function(){return[cn]})),_:1},8,["onUploader"])):Object(r["h"])("",!0),!0===e.uploadActive?(Object(r["u"])(),Object(r["g"])(d,{key:2,class:"progressbar",value:e.uploadProgressPercent},null,8,["value"])):Object(r["h"])("",!0)])})),un=(n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("4de4"),n("8a79"),n("2909")),dn=function(){function e(){Object(p["a"])(this,e),this.m_idBuffer=new Uint8Array(e.ID_SIZE_BYTE),this.m_targetBuffer=new Uint8Array(e.TARGET_SIZE_BYTE),this.m_versionBuffer=new Uint8Array(e.VERSION_SIZE_BYTE),this.m_hashAlgBuffer=new Uint8Array(e.HASH_ALG_SIZE_BYTE),this.m_signAlgBuffer=new Uint8Array(e.SIGN_ALG_SIZE_BYTE),this.m_signatureBuffer=new Uint8Array(e.SIGNATURE_SIZE_BYTE)}return Object(k["a"])(e,[{key:"getTarget",value:function(){return e.binaryToString(this.m_targetBuffer)}},{key:"setTarget",value:function(t){var n=!1;return e.TARGET_SIZE_BYTE>=t.length&&(this.m_targetBuffer=e.stringToBinary(t),n=!0),n}},{key:"setSignature",value:function(t){var n=!1;return e.SIGNATURE_SIZE_BYTE===t.length&&(this.m_signatureBuffer=t,n=!0),n}},{key:"getID",value:function(){return e.binaryToString(this.m_idBuffer)}},{key:"setID",value:function(t){var n=!1;return e.ID_SIZE_BYTE>=t.length&&(this.m_idBuffer=e.stringToBinary(t),n=!0),n}},{key:"getVersion",value:function(){return this.m_versionBuffer[0]}},{key:"setVersion",value:function(e){this.m_versionBuffer[0]=e}},{key:"getHashAlg",value:function(){return e.binaryToString(this.m_hashAlgBuffer)}},{key:"setHashAlg",value:function(t){var n=!1;return e.HASH_ALG_SIZE_BYTE>=t.length&&(this.m_hashAlgBuffer=e.stringToBinary(t),n=!0),n}},{key:"getSignAlg",value:function(){return e.binaryToString(this.m_signAlgBuffer)}},{key:"setSignAlg",value:function(t){var n=!1;return e.SIGN_ALG_SIZE_BYTE>=t.length&&(this.m_signAlgBuffer=e.stringToBinary(t),n=!0),n}},{key:"serialize",value:function(){var t=new Uint8Array(e.HEADER_SIZE_BYTE),n=0;this.setID("CPSFW"),this.setVersion(1),this.setHashAlg("SHA256"),this.setSignAlg("RSA2048PKCS#1v15");for(var r=0;r<e.ID_SIZE_BYTE;r++)t[r]=this.m_idBuffer[r];n+=e.ID_SIZE_BYTE;for(var o=0;o<e.TARGET_SIZE_BYTE;o++)t[n+o]=this.m_targetBuffer[o];n+=e.TARGET_SIZE_BYTE,t[n]=this.m_versionBuffer[0],n+=1;for(var a=0;a<e.HASH_ALG_SIZE_BYTE;a++)t[n+a]=this.m_hashAlgBuffer[a];n+=e.HASH_ALG_SIZE_BYTE;for(var i=0;i<e.SIGN_ALG_SIZE_BYTE;i++)t[n+i]=this.m_signAlgBuffer[i];n+=e.SIGN_ALG_SIZE_BYTE;for(var s=0;s<e.SIGNATURE_SIZE_BYTE;s++)t[n+s]=this.m_signatureBuffer[s];return t}},{key:"deserialize",value:function(t){var n=!1;if(e.HEADER_SIZE_BYTE===t.length){for(var r=0,o=0;o<e.ID_SIZE_BYTE;o++)this.m_idBuffer[o]=t[o];r+=e.ID_SIZE_BYTE;for(var a=0;a<e.TARGET_SIZE_BYTE;a++)this.m_targetBuffer[a]=t[r+a];r+=e.TARGET_SIZE_BYTE,this.m_versionBuffer[0]=t[r],r+=1;for(var i=0;i<e.HASH_ALG_SIZE_BYTE;i++)this.m_hashAlgBuffer[i]=t[r+i];r+=e.HASH_ALG_SIZE_BYTE;for(var s=0;s<e.SIGN_ALG_SIZE_BYTE;s++)this.m_signAlgBuffer[s]=t[r+s];r+=e.SIGN_ALG_SIZE_BYTE;for(var c=0;c<e.SIGNATURE_SIZE_BYTE;c++)this.m_signatureBuffer[c]=t[r+c];n=!0}return n}}],[{key:"stringToBinary",value:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}},{key:"binaryToString",value:function(e){return String.fromCharCode.apply(String,Object(un["a"])(e))}}]),e}();dn.ID_SIZE_BYTE=16,dn.TARGET_SIZE_BYTE=16,dn.VERSION_SIZE_BYTE=1,dn.HASH_ALG_SIZE_BYTE=16,dn.SIGN_ALG_SIZE_BYTE=32,dn.SIGNATURE_SIZE_BYTE=256,dn.HEADER_SIZE_BYTE=dn.ID_SIZE_BYTE+dn.TARGET_SIZE_BYTE+dn.VERSION_SIZE_BYTE+dn.HASH_ALG_SIZE_BYTE+dn.SIGN_ALG_SIZE_BYTE+dn.SIGNATURE_SIZE_BYTE;var fn=function(){function e(){Object(p["a"])(this,e),this.m_header=new dn,this.m_firmware=new Uint8Array}return Object(k["a"])(e,[{key:"getHeader",value:function(){return this.m_header}},{key:"setHeader",value:function(e){this.m_header=e}},{key:"setFirmware",value:function(e){this.m_firmware=e}},{key:"serialize",value:function(){for(var e=0,t=this.m_header.serialize(),n=new Uint8Array(t.length+this.m_firmware.length),r=0;r<t.length;r++)n[r]=t[r];e+=t.length;for(var o=0;o<this.m_firmware.length;o++)n[e+o]=this.m_firmware[o];return n}},{key:"deserialize",value:function(e){for(var t=0,n=!1,r=new Uint8Array(dn.HEADER_SIZE_BYTE),o=0;o<dn.HEADER_SIZE_BYTE;o++)r[o]=e[o];n=this.m_header.deserialize(r),t+=dn.HEADER_SIZE_BYTE;for(var a=0;a<e.length-dn.HEADER_SIZE_BYTE;a++)this.m_firmware[a]=e[t+a];return n}}]),e}(),bn=n("81fa"),mn=(n("25f0"),function(){function e(){Object(p["a"])(this,e)}return Object(k["a"])(e,null,[{key:"binaryToHexString",value:function(e){for(var t="",n=0;n<e.length;n++){var r=(+e[n]).toString(16);r.length<2&&(r="0"+r),t+=r}return t}},{key:"hexStringToBinary",value:function(e){for(var t=0,n=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)n[t]=parseInt(e[r]+e[r+1],16),t++;return n}}]),e}()),hn=function(){function e(){Object(p["a"])(this,e)}return Object(k["a"])(e,null,[{key:"sign",value:function(e,t){var n="SHA256withRSA",r=new bn["KJUR"].crypto.Signature({alg:n});return r.init(e),r.updateHex(mn.binaryToHexString(t)),mn.hexStringToBinary(r.sign())}}]),e}(),gn=n("21a6"),On=n.n(gn),pn=Object(r["l"])({name:"Upload",components:{FirmwareCard:tn,TextDialog:je},data:function(){return{options:[{name:"Upload signed firmware (.cpsfw)",key:"cpsfw"},{name:"Upload unsigned firmware (.bin) and RSA2048 signing key (.pem)",key:"bin"}],uploadOption:{name:"Upload unsigned firmware (.bin) and RSA2048 signing key (.pem)",key:"bin"},uploadProgressPercent:0,uploadActive:!1,update:!1,type:"no-yes",infoDialogVisible:!1,infoText:"",fnPtr:function(){console.log("empty")}}},methods:{uploadPackets:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c,l,u,d,f,b,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.uploadActive=!0,t.uploadProgressPercent=0,r=2048,o=Math.floor(e.length/r),a=e.length%r,i=0,s=new Uint8Array(r),c=new Uint8Array(a),l=new v,u=!0,"ComPlatform"===t.$store.getters.selectedDevice.name?l.commandId="uploadcom":"Zumo32U4 Robot"===t.$store.getters.selectedDevice.name&&(l.commandId="uploadzumo"),l.jsonPayload=JSON.stringify({fileSizeBytes:e.length}),n.next=14,E.getInstance().makeRequest(l,t);case 14:if(d=n.sent,w.SUCCESS!==d.statusCode){n.next=46;break}y.debug("Successfully switched API into BINARY mode!"),f=0;case 18:if(!(f<o)){n.next=34;break}for(i=f*r,b=0;b<r;b++)s[b]=e[i+b];return n.next=23,E.getInstance().sendBinary(s,t);case 23:if(d=n.sent,w.SUCCESS==d.statusCode){n.next=30;break}return y.error("Could not upload data chunk! Aborting upload now!"),u=!1,n.abrupt("break",34);case 30:t.uploadProgressPercent=Math.round(f/o*100);case 31:f++,n.next=18;break;case 34:if(!0!==u){n.next=43;break}for(i=o*r,m=0;m<a;m++)c[m]=e[i+m];return n.next=39,E.getInstance().sendBinary(c,t);case 39:d=n.sent,w.SUCCESS!=d.statusCode?(y.error("Could not upload last data chunk!"),u=!1):t.uploadProgressPercent=100,n.next=44;break;case 43:y.error("Not sending remaining bytes because previous packet could not be sent!");case 44:n.next=47;break;case 46:y.error("Could not switch API into binary mode!");case 47:return t.uploadActive=!1,n.abrupt("return",new Promise((function(e){e(u)})));case 49:case"end":return n.stop()}}),n)})))()},upload:function(e){var t=this;this.uploadPackets(e).then((function(e){t.update=!t.update,!0===e?t.$toast.add({severity:"success",summary:"Upload Success",detail:"Successfully uploaded the firmware!",life:5e3}):t.$toast.add({severity:"error",summary:"Upload Error",detail:"Could not upload the firmware!",life:5e3}),t.infoDialogVisible=!0,t.infoText="Do you want to flash the uploaded firmware now?",t.fnPtr=function(){t.infoDialogVisible=!1,t.$router.push({name:"Flash",query:{autoFlash:"true"}})}}))},save:function(e,t){var n=this;this.infoDialogVisible=!0,this.infoText="Do you want to download the generated CPSFW file?",this.fnPtr=function(){n.infoDialogVisible=!1,On.a.saveAs(new Blob([e.buffer]),t.getTarget()+"_firmware_signed.cpsfw")}},uploadFirmware:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.files,o=new FileReader,a=new Uint8Array,i=new dn,s=new fn,l=r.filter((function(e){return e.name.endsWith(".bin")})),u=r.filter((function(e){return e.name.endsWith(".pem")})),d=r.filter((function(e){return e.name.endsWith(".cpsfw")})),"bin"===t.uploadOption.key?1===l.length&&1===u.length?("ComPlatform"===t.$store.getters.selectedDevice.name?i.setTarget("COM"):"Zumo32U4 Robot"===t.$store.getters.selectedDevice.name&&i.setTarget("ZUMO"),o.readAsArrayBuffer(l[0]),o.onload=function(e){a=new Uint8Array(o.result),s.setFirmware(a),o.readAsText(u[0]),o.onload=function(e){var n=hn.sign(o.result,a);i.setSignature(n),s.setHeader(i),c=s.serialize(),t.upload(c),t.save(c,i)}}):t.$toast.add({severity:"error",summary:"Selection Error",detail:"Please select exactly one *.bin and one *.pem file!",life:5e3}):"cpsfw"===t.uploadOption.key&&(1===d.length?(o.readAsArrayBuffer(d[0]),o.onload=function(e){a=new Uint8Array(o.result),s=new fn,!0===s.deserialize(a)?(console.log(s),t.upload(a)):t.$toast.add({severity:"error",summary:"Deserialization Error",detail:"Could not deserialize the provided CPSFW file!",life:5e3})}):t.$toast.add({severity:"error",summary:"Selection Error",detail:"Please select exactly one *.cpsfw file!",life:5e3}));case 9:case"end":return n.stop()}}),n)})))()},flashFirmware:function(){this.infoDialogVisible=!1,this.$router.push({name:"Flash",query:{autoFlash:"true"}})}}});n("cb52");pn.render=ln,pn.__scopeId="data-v-3c4b0ba2";var vn=pn,jn=[{path:"/",name:"Home",component:Je},{path:"/flash",name:"Flash",component:rn},{path:"/upload",name:"Upload",component:vn},{path:"/settings",name:"Settings",component:Rt}],kn=Object(we["a"])({history:Object(we["b"])(),routes:jn}),yn=kn,wn=n("5502"),_n=Object(wn["a"])({state:{currentUser:String,seletedDevice:String,showLoginDialg:Boolean},mutations:{setUser:function(e,t){e.currentUser=t},setDevice:function(e,t){e.seletedDevice=t},setLoginDialogVisibility:function(e,t){e.showLoginDialg=t}},getters:{currentUser:function(e){return e.currentUser},selectedDevice:function(e){return e.seletedDevice},loginDialogVisible:function(e){return e.showLoginDialg}}}),Sn=_n,En=n("9319"),Dn=n("9899"),In=n("bb57"),Cn=n("0100"),Tn=n("485c"),An=n("b3b6"),xn=n("8398"),Un=n("c045"),Rn=n("a469"),Bn=n("90eb"),Pn=n("2052"),Ln=n("e8f7"),Vn=(n("098b"),n("e1ae"),n("4121"),Object(r["f"])(ye));Vn.use(Sn),Vn.use(yn),Vn.use(En["a"]),Vn.use(Tn["a"]),Vn.component("Card",Dn["a"]),Vn.component("Button",In["a"]),Vn.component("Dropdown",Cn["a"]),Vn.component("Toast",An["a"]),Vn.component("InputText",xn["a"]),Vn.component("ProgressBar",Un["a"]),Vn.component("ProgressSpinner",Rn["a"]),Vn.component("Toast",An["a"]),Vn.component("Menu",Bn["a"]),Vn.component("Checkbox",Pn["a"]),Vn.component("FileUpload",Ln["a"]),Vn.mount("#app")},d065:function(e,t,n){"use strict";n("90dd")},d710:function(e,t,n){"use strict";n("7e28")},e58a:function(e,t,n){"use strict";n("5c02")},eb03:function(e,t,n){"use strict";n("95d4")},fecb:function(e,t,n){"use strict";n("b6f3")}});